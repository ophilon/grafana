<!DOCTYPE html>
<h1 id="team-api">Team API</h1>
<p>This API can be used to manage Teams and Team Memberships.</p>
<p>Access to these API endpoints is restricted as follows:</p>
<ul>
<li>All authenticated users are able to view details of teams they are a member of.</li>
<li>Organization Admins are able to manage all teams and team members.</li>
</ul>
<blockquote>
<p>If you are running Grafana Enterprise, for some endpoints you&rsquo;ll need to have specific permissions. Refer to <a href="/docs/grafana/latest/administration/roles-and-permissions/access-control/custom-role-actions-scopes/">Role-based access control permissions</a> for more information.</p></blockquote>
<h2 id="team-search-with-paging">Team Search With Paging</h2>
<p><code>GET /api/teams/search?perpage=50&amp;page=1&amp;query=myteam&amp;sort=memberCount-desc</code></p>
<p>or</p>
<p><code>GET /api/teams/search?name=myteam</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:read</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/teams/search?perpage=10&amp;page=1&amp;query=mytestteam HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;totalCount&#34;: 1,
  &#34;teams&#34;: [
    {
      &#34;id&#34;: 1,
      &#34;orgId&#34;: 1,
      &#34;name&#34;: &#34;MyTestTeam&#34;,
      &#34;email&#34;: &#34;&#34;,
      &#34;avatarUrl&#34;: &#34;\/avatar\/3f49c15916554246daa714b9bd0ee398&#34;,
      &#34;memberCount&#34;: 1
    }
  ],
  &#34;page&#34;: 1,
  &#34;perPage&#34;: 1000
}</pre>
<h3 id="using-the-query-parameter">Using the query parameter</h3>
<p>Default value for the <code>perpage</code> parameter is <code>1000</code> and for the <code>page</code> parameter is <code>1</code>.</p>
<p>The <code>totalCount</code> field in the response can be used for pagination of the teams list E.g. if <code>totalCount</code> is equal to 100 teams and the <code>perpage</code> parameter is set to 10 then there are 10 pages of teams.</p>
<p>The <code>query</code> parameter is optional and it will return results where the query value is contained in the <code>name</code> field. Query values with spaces need to be URL encoded e.g. <code>query=my%20team</code>.</p>
<p>The <code>sort</code> param is an optional comma separated list of options to order the search result. Accepted values for the sort filter are: <code> name-asc</code>, <code>name-desc</code>, <code>email-asc</code>, <code>email-desc</code>, <code>memberCount-asc</code>, <code>memberCount-desc</code>. By default, if <code>sort</code> is not specified, the teams list will be ordered by <code>name</code> in ascending order.</p>
<h3 id="using-the-name-parameter">Using the name parameter</h3>
<p>The <code>name</code> parameter returns a single team if the parameter matches the <code>name</code> field.</p>
<h4 id="status-codes">Status Codes:</h4>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>400</strong> - Bad Request</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found (if searching by name)</li>
</ul>
<h2 id="get-team-by-id">Get Team By Id</h2>
<p><code>GET /api/teams/:id</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:read</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/teams/1 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;id&#34;: 1,
  &#34;orgId&#34;: 1,
  &#34;name&#34;: &#34;MyTestTeam&#34;,
  &#34;email&#34;: &#34;&#34;,
  &#34;created&#34;: &#34;2017-12-15T10:40:45+01:00&#34;,
  &#34;updated&#34;: &#34;2017-12-15T10:40:45+01:00&#34;
}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found</li>
</ul>
<h2 id="add-team">Add Team</h2>
<p>The Team <code>name</code> needs to be unique. <code>name</code> is required and <code>email</code> is optional.</p>
<p><code>POST /api/teams</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:create</td>
          <td>N/A</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>POST /api/teams HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt

{
  &#34;name&#34;: &#34;MyTestTeam&#34;,
  &#34;email&#34;: &#34;email@test.com&#34;,
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Team created&#34;,&#34;teamId&#34;:2,&#34;uid&#34;:&#34;ceaulqadfoav4e&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>409</strong> - Team name is taken</li>
</ul>
<h2 id="update-team">Update Team</h2>
<p>There are two fields that can be updated for a team: <code>name</code> and <code>email</code>.</p>
<p><code>PUT /api/teams/:id</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:write</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>PUT /api/teams/2 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt

{
  &#34;name&#34;: &#34;MyTestTeam&#34;,
  &#34;email&#34;: &#34;email@test.com&#34;
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Team updated&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found</li>
<li><strong>409</strong> - Team name is taken</li>
</ul>
<h2 id="delete-team-by-id">Delete Team By Id</h2>
<p><code>DELETE /api/teams/:id</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:delete</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>DELETE /api/teams/2 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Team deleted&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Failed to delete Team. ID not found</li>
</ul>
<h2 id="get-team-members">Get Team Members</h2>
<p><code>GET /api/teams/:teamId/members</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams.permissions:read</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/teams/1/members HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

[
  {
    &#34;orgId&#34;: 1,
    &#34;teamId&#34;: 1,
    &#34;userId&#34;: 3,
    &#34;email&#34;: &#34;user1@email.com&#34;,
    &#34;login&#34;: &#34;user1&#34;,
    &#34;avatarUrl&#34;: &#34;\/avatar\/1b3c32f6386b0185c40d359cdc733a79&#34;
  },
  {
    &#34;orgId&#34;: 1,
    &#34;teamId&#34;: 1,
    &#34;userId&#34;: 2,
    &#34;email&#34;: &#34;user2@email.com&#34;,
    &#34;login&#34;: &#34;user2&#34;,
    &#34;avatarUrl&#34;: &#34;\/avatar\/cad3c68da76e45d10269e8ef02f8e73e&#34;
  }
]</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
</ul>
<h2 id="add-team-member">Add Team Member</h2>
<p><code>POST /api/teams/:teamId/members</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams.permissions:write</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>POST /api/teams/1/members HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt

{
  &#34;userId&#34;: 2
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Member added to Team&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>400</strong> - User is already added to this team</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found</li>
</ul>
<h2 id="remove-member-from-team">Remove Member From Team</h2>
<p><code>DELETE /api/teams/:teamId/members/:userId</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams.permissions:write</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>DELETE /api/teams/2/members/3 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Team Member removed&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found/Team member not found</li>
</ul>
<h2 id="bulk-update-team-members">Bulk Update Team Members</h2>
<p>Allows bulk updating team members and administrators using user emails.
Will override all current members and administrators for the specified team.</p>
<p>`PUT /api/teams/:teamId/members</p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams.permissions:write</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>PUT /api/teams/1/members HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer glsa_kcVxDhZtu5ISOZIEt

{
  &#34;members&#34;: [&#34;user1@email.com&#34;, &#34;user2@email.com&#34;]
  &#34;admins&#34;: [&#34;user3@email.com&#34;]
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Team memberships have been updated&#34;}</pre>
<p>Status Codes:</p>
<ul>
<li><strong>200</strong> - Ok</li>
<li><strong>401</strong> - Unauthorized</li>
<li><strong>403</strong> - Permission denied</li>
<li><strong>404</strong> - Team not found/Team member not found</li>
<li><strong>500</strong> - Internal error</li>
</ul>
<h2 id="get-team-preferences">Get Team Preferences</h2>
<p><code>GET /api/teams/:teamId/preferences</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:read</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/teams/2/preferences HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;theme&#34;: &#34;&#34;,
  &#34;homeDashboardId&#34;: 0,
  &#34;homeDashboardUID&#34;: &#34;&#34;,
  &#34;timezone&#34;: &#34;&#34;
}</pre>
<h2 id="update-team-preferences">Update Team Preferences</h2>
<p><code>PUT /api/teams/:teamId/preferences</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#team-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>teams:write</td>
          <td>teams:*</td>
      </tr>
  </tbody>
</table>
<p><strong>Example Request</strong>:</p>
<pre>PUT /api/teams/2/preferences HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;theme&#34;: &#34;dark&#34;,
  &#34;homeDashboardId&#34;: 39,
  &#34;homeDashboardUID&#34;: &#34;jcIIG-07z&#34;,
  &#34;timezone&#34;: &#34;utc&#34;
}</pre>
<p>JSON Body Schema:</p>
<ul>
<li><strong>theme</strong> - One of: <code>light</code>, <code>dark</code>, or an empty string for the default theme</li>
<li><strong>homeDashboardId</strong> - Deprecated. Use <code>homeDashboardUID</code> instead.</li>
<li><strong>homeDashboardUID</strong> - The <code>:uid</code> of a dashboard</li>
<li><strong>timezone</strong> - One of: <code>utc</code>, <code>browser</code>, or an empty string for the default</li>
</ul>
<p>Omitting a key will cause the current value to be replaced with the system default value.</p>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: text/plain; charset=utf-8

{
  &#34;message&#34;:&#34;Preferences updated&#34;
}</pre>
