<!DOCTYPE html>
<h1 id="data-source-api">Data source API</h1>
<blockquote>
<p>If you are running Grafana Enterprise, for some endpoints you&rsquo;ll need to have specific permissions. Refer to <a href="/docs/grafana/latest/administration/roles-and-permissions/access-control/custom-role-actions-scopes/">Role-based access control permissions</a> for more information.</p></blockquote>
<h2 id="get-all-data-sources">Get all data sources</h2>
<p><code>GET /api/datasources</code></p>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API currently doesn&rsquo;t handle pagination. The default maximum number of data sources returned is 5000. You can change this value in the default.ini file.</p></blockquote></div>

<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:read</td>
          <td>datasources:*</td>
      </tr>
  </tbody>
</table>
<h3 id="examples">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/datasources HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

[
   {
     &#34;id&#34;: 1,
     &#34;orgId&#34;: 1,
     &#34;uid&#34;: &#34;H8joYFVGz&#34;
     &#34;name&#34;: &#34;datasource_elastic&#34;,
     &#34;type&#34;: &#34;elasticsearch&#34;,
     &#34;typeLogoUrl&#34;: &#34;public/app/plugins/datasource/elasticsearch/img/elasticsearch.svg&#34;,
     &#34;access&#34;: &#34;proxy&#34;,
     &#34;url&#34;: &#34;http://mydatasource.com&#34;,
     &#34;password&#34;: &#34;&#34;,
     &#34;user&#34;: &#34;&#34;,
     &#34;database&#34;: &#34;grafana-dash&#34;,
     &#34;basicAuth&#34;: false,
     &#34;isDefault&#34;: false,
     &#34;jsonData&#34;: {
         &#34;logLevelField&#34;: &#34;&#34;,
         &#34;logMessageField&#34;: &#34;&#34;,
         &#34;maxConcurrentShardRequests&#34;: 256,
         &#34;timeField&#34;: &#34;@timestamp&#34;
     },
     &#34;readOnly&#34;: false
   }
]</pre>
<h2 id="get-a-single-data-source-by-id">Get a single data source by id</h2>
<p><code>GET /api/datasources/:datasourceId</code></p>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#get-a-single-data-source-by-uid">API for getting a single data source by UID</a> or to the <a href="#get-a-single-data-source-by-name">API for getting a single data source by its name</a>.</p></blockquote></div>

<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:read</td>
          <td>datasources:*<br>datasources:id:*<br>datasources:id:1 (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-1">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/datasources/1 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;id&#34;: 1,
  &#34;uid&#34;: &#34;kLtEtcRGk&#34;,
  &#34;orgId&#34;: 1,
  &#34;name&#34;: &#34;test_datasource&#34;,
  &#34;type&#34;: &#34;graphite&#34;,
  &#34;typeLogoUrl&#34;: &#34;&#34;,
  &#34;access&#34;: &#34;proxy&#34;,
  &#34;url&#34;: &#34;http://mydatasource.com&#34;,
  &#34;password&#34;: &#34;&#34;,
  &#34;user&#34;: &#34;&#34;,
  &#34;database&#34;: &#34;&#34;,
  &#34;basicAuth&#34;: false,
  &#34;basicAuthUser&#34;: &#34;&#34;,
  &#34;basicAuthPassword&#34;: &#34;&#34;,
  &#34;withCredentials&#34;: false,
  &#34;isDefault&#34;: false,
  &#34;jsonData&#34;: {
    &#34;graphiteType&#34;: &#34;default&#34;,
    &#34;graphiteVersion&#34;: &#34;1.1&#34;
  },
  &#34;secureJsonFields&#34;: {},
  &#34;version&#34;: 1,
  &#34;readOnly&#34;: false
}</pre>
<h2 id="get-a-single-data-source-by-uid">Get a single data source by uid</h2>
<p><code>GET /api/datasources/uid/:uid</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:read</td>
          <td>datasources:*<br>datasources:uid:*<br>datasources:uid:kLtEtcRGk (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-2">Examples</h3>
<p><strong>Example request:</strong></p>
<pre>GET /api/datasources/uid/kLtEtcRGk HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;id&#34;: 1,
  &#34;uid&#34;: &#34;kLtEtcRGk&#34;,
  &#34;orgId&#34;: 1,
  &#34;name&#34;: &#34;test_datasource&#34;,
  &#34;type&#34;: &#34;graphite&#34;,
  &#34;typeLogoUrl&#34;: &#34;&#34;,
  &#34;access&#34;: &#34;proxy&#34;,
  &#34;url&#34;: &#34;http://mydatasource.com&#34;,
  &#34;password&#34;: &#34;&#34;,
  &#34;user&#34;: &#34;&#34;,
  &#34;database&#34;: &#34;&#34;,
  &#34;basicAuth&#34;: false,
  &#34;basicAuthUser&#34;: &#34;&#34;,
  &#34;basicAuthPassword&#34;: &#34;&#34;,
  &#34;withCredentials&#34;: false,
  &#34;isDefault&#34;: false,
  &#34;jsonData&#34;: {
    &#34;graphiteType&#34;: &#34;default&#34;,
    &#34;graphiteVersion&#34;: &#34;1.1&#34;
  },
  &#34;secureJsonFields&#34;: {},
  &#34;version&#34;: 1,
  &#34;readOnly&#34;: false
}</pre>
<h2 id="get-a-single-data-source-by-name">Get a single data source by name</h2>
<p><code>GET /api/datasources/name/:name</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:read</td>
          <td>datasources:*<br>datasources:name:*<br>datasources:name:test_datasource (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-3">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/datasources/name/test_datasource HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;id&#34;: 1,
  &#34;uid&#34;: &#34;kLtEtcRGk&#34;,
  &#34;orgId&#34;: 1,
  &#34;name&#34;: &#34;test_datasource&#34;,
  &#34;type&#34;: &#34;graphite&#34;,
  &#34;typeLogoUrl&#34;: &#34;&#34;,
  &#34;access&#34;: &#34;proxy&#34;,
  &#34;url&#34;: &#34;http://mydatasource.com&#34;,
  &#34;password&#34;: &#34;&#34;,
  &#34;user&#34;: &#34;&#34;,
  &#34;database&#34;: &#34;&#34;,
  &#34;basicAuth&#34;: false,
  &#34;basicAuthUser&#34;: &#34;&#34;,
  &#34;basicAuthPassword&#34;: &#34;&#34;,
  &#34;withCredentials&#34;: false,
  &#34;isDefault&#34;: false,
  &#34;jsonData&#34;: {
    &#34;graphiteType&#34;: &#34;default&#34;,
    &#34;graphiteVersion&#34;: &#34;1.1&#34;
  },
  &#34;secureJsonFields&#34;: {},
  &#34;version&#34;: 1,
  &#34;readOnly&#34;: false
}</pre>
<h2 id="get-data-source-id-by-name">Get data source Id by name</h2>
<p><code>GET /api/datasources/id/:name</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources.id:read</td>
          <td>datasources:*<br>datasources:name:*<br>datasources:name:test_datasource (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-4">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/datasources/id/test_datasource HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;id&#34;:1
}</pre>
<h2 id="create-a-data-source">Create a data source</h2>
<p><code>POST /api/datasources</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:create</td>
          <td>n/a</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-5">Examples</h3>
<p><strong>Example Graphite Request</strong>:</p>
<pre>POST /api/datasources HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;name&#34;:&#34;test_datasource&#34;,
  &#34;type&#34;:&#34;graphite&#34;,
  &#34;url&#34;:&#34;http://mydatasource.com&#34;,
  &#34;access&#34;:&#34;proxy&#34;,
  &#34;basicAuth&#34;:false
}</pre>
<p><strong>Example Graphite Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;datasource&#34;: {
    &#34;id&#34;: 1,
    &#34;orgId&#34;: 1,
    &#34;name&#34;: &#34;test_datasource&#34;,
    &#34;type&#34;: &#34;graphite&#34;,
    &#34;typeLogoUrl&#34;: &#34;&#34;,
    &#34;access&#34;: &#34;proxy&#34;,
    &#34;url&#34;: &#34;http://mydatasource.com&#34;,
    &#34;password&#34;: &#34;&#34;,
    &#34;user&#34;: &#34;&#34;,
    &#34;database&#34;: &#34;&#34;,
    &#34;basicAuth&#34;: false,
    &#34;basicAuthUser&#34;: &#34;&#34;,
    &#34;basicAuthPassword&#34;: &#34;&#34;,
    &#34;withCredentials&#34;: false,
    &#34;isDefault&#34;: false,
    &#34;jsonData&#34;: {},
    &#34;secureJsonFields&#34;: {},
    &#34;version&#34;: 1,
    &#34;readOnly&#34;: false
  },
  &#34;id&#34;: 1,
  &#34;message&#34;: &#34;Datasource added&#34;,
  &#34;name&#34;: &#34;test_datasource&#34;
}</pre>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>By defining <code>password</code> and <code>basicAuthPassword</code> under <code>secureJsonData</code> Grafana encrypts them securely as an encrypted blob in the database. The response then lists the encrypted fields under <code>secureJsonFields</code>.</p></blockquote></div>

<p><strong>Example Graphite Request with basic auth enabled</strong>:</p>
<pre>POST /api/datasources HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;name&#34;: &#34;test_datasource&#34;,
  &#34;type&#34;: &#34;graphite&#34;,
  &#34;url&#34;: &#34;http://mydatasource.com&#34;,
  &#34;access&#34;: &#34;proxy&#34;,
  &#34;basicAuth&#34;: true,
  &#34;basicAuthUser&#34;: &#34;basicuser&#34;,
  &#34;secureJsonData&#34;: {
    &#34;basicAuthPassword&#34;: &#34;basicpassword&#34;
  }
}</pre>
<p><strong>Example Response with basic auth enabled</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;datasource&#34;: {
    &#34;id&#34;: 1,
    &#34;orgId&#34;: 1,
    &#34;name&#34;: &#34;test_datasource&#34;,
    &#34;type&#34;: &#34;graphite&#34;,
    &#34;typeLogoUrl&#34;: &#34;&#34;,
    &#34;access&#34;: &#34;proxy&#34;,
    &#34;url&#34;: &#34;http://mydatasource.com&#34;,
    &#34;password&#34;: &#34;&#34;,
    &#34;user&#34;: &#34;&#34;,
    &#34;database&#34;: &#34;&#34;,
    &#34;basicAuth&#34;: true,
    &#34;basicAuthUser&#34;: &#34;basicuser&#34;,
    &#34;basicAuthPassword&#34;: &#34;&#34;,
    &#34;withCredentials&#34;: false,
    &#34;isDefault&#34;: false,
    &#34;jsonData&#34;: {},
    &#34;secureJsonFields&#34;: {
      &#34;basicAuthPassword&#34;: true
    },
    &#34;version&#34;: 1,
    &#34;readOnly&#34;: false
  },
  &#34;id&#34;: 102,
  &#34;message&#34;: &#34;Datasource added&#34;,
  &#34;name&#34;: &#34;test_datasource&#34;
}</pre>
<p><strong>Example CloudWatch Request</strong>:</p>
<pre>POST /api/datasources HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;name&#34;: &#34;test_datasource&#34;,
  &#34;type&#34;: &#34;cloudwatch&#34;,
  &#34;url&#34;: &#34;http://monitoring.us-west-1.amazonaws.com&#34;,
  &#34;access&#34;: &#34;proxy&#34;,
  &#34;jsonData&#34;: {
    &#34;authType&#34;: &#34;keys&#34;,
    &#34;defaultRegion&#34;: &#34;us-west-1&#34;
  },
  &#34;secureJsonData&#34;: {
    &#34;accessKey&#34;: &#34;Ol4pIDpeKSA6XikgOl4p&#34;,
    &#34;secretKey&#34;: &#34;dGVzdCBrZXkgYmxlYXNlIGRvbid0IHN0ZWFs&#34;
  }
}</pre>
<h2 id="update-an-existing-data-source-by-id">Update an existing data source by id</h2>
<p><code>PUT /api/datasources/:datasourceId</code></p>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#update-an-existing-data-source">new data source update API</a>.</p></blockquote></div>

<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:write</td>
          <td>datasources:*<br>datasources:id:*<br>datasources:id:1 (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-6">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>PUT /api/datasources/1 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;id&#34;:1,
  &#34;orgId&#34;:1,
  &#34;name&#34;:&#34;test_datasource&#34;,
  &#34;type&#34;:&#34;graphite&#34;,
  &#34;access&#34;:&#34;proxy&#34;,
  &#34;url&#34;:&#34;http://mydatasource.com&#34;,
  &#34;password&#34;:&#34;&#34;,
  &#34;user&#34;:&#34;&#34;,
  &#34;database&#34;:&#34;&#34;,
  &#34;basicAuth&#34;:true,
  &#34;basicAuthUser&#34;:&#34;basicuser&#34;,
  &#34;secureJsonData&#34;: {
    &#34;basicAuthPassword&#34;: &#34;basicpassword&#34;
  },
  &#34;isDefault&#34;:false,
  &#34;jsonData&#34;:null
}</pre>
<p>Note that the UID cannot be modified.</p>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;datasource&#34;: {
    &#34;id&#34;: 1,
    &#34;uid&#34;: &#34;kLtEtcRGk&#34;,
    &#34;orgId&#34;: 1,
    &#34;name&#34;: &#34;test_datasource&#34;,
    &#34;type&#34;: &#34;graphite&#34;,
    &#34;typeLogoUrl&#34;: &#34;&#34;,
    &#34;access&#34;: &#34;proxy&#34;,
    &#34;url&#34;: &#34;http://mydatasource.com&#34;,
    &#34;password&#34;: &#34;&#34;,
    &#34;user&#34;: &#34;&#34;,
    &#34;database&#34;: &#34;&#34;,
    &#34;basicAuth&#34;: true,
    &#34;basicAuthUser&#34;: &#34;basicuser&#34;,
    &#34;basicAuthPassword&#34;: &#34;&#34;,
    &#34;withCredentials&#34;: false,
    &#34;isDefault&#34;: false,
    &#34;jsonData&#34;: {},
    &#34;secureJsonFields&#34;: {
      &#34;basicAuthPassword&#34;: true
    },
    &#34;version&#34;: 1,
    &#34;readOnly&#34;: false
  },
  &#34;id&#34;: 102,
  &#34;message&#34;: &#34;Datasource updated&#34;,
  &#34;name&#34;: &#34;test_datasource&#34;
}</pre>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Similar to <a href="#create-a-data-source">creating a data source</a>, <code>password</code> and <code>basicAuthPassword</code> should be defined under <code>secureJsonData</code> in order to be stored securely as an encrypted blob in the database. Then, the encrypted fields are listed under <code>secureJsonFields</code> section in the response.</p></blockquote></div>

<h2 id="update-an-existing-data-source">Update an existing data source</h2>
<p><code>PUT /api/datasources/uid/:uid</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:write</td>
          <td>datasources:*<br>datasources:uid:*<br>datasources:uid:kLtEtcRGk (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-7">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>PUT /api/datasources/uid/kLtEtcRGk HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;id&#34;:1,
  &#34;uid&#34;: &#34;uid&#34;,
  &#34;orgId&#34;:1,
  &#34;name&#34;:&#34;test_datasource&#34;,
  &#34;type&#34;:&#34;graphite&#34;,
  &#34;access&#34;:&#34;proxy&#34;,
  &#34;url&#34;:&#34;http://mydatasource.com&#34;,
  &#34;password&#34;:&#34;&#34;,
  &#34;user&#34;:&#34;&#34;,
  &#34;database&#34;:&#34;&#34;,
  &#34;basicAuth&#34;:true,
  &#34;basicAuthUser&#34;:&#34;basicuser&#34;,
  &#34;secureJsonData&#34;: {
    &#34;basicAuthPassword&#34;: &#34;basicpassword&#34;
  },
  &#34;isDefault&#34;:false,
  &#34;jsonData&#34;:null
}</pre>
<p>Note that the UID cannot be modified.</p>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;datasource&#34;: {
    &#34;id&#34;: 1,
    &#34;uid&#34;: &#34;uid&#34;,
    &#34;orgId&#34;: 1,
    &#34;name&#34;: &#34;test_datasource&#34;,
    &#34;type&#34;: &#34;graphite&#34;,
    &#34;typeLogoUrl&#34;: &#34;&#34;,
    &#34;access&#34;: &#34;proxy&#34;,
    &#34;url&#34;: &#34;http://mydatasource.com&#34;,
    &#34;password&#34;: &#34;&#34;,
    &#34;user&#34;: &#34;&#34;,
    &#34;database&#34;: &#34;&#34;,
    &#34;basicAuth&#34;: true,
    &#34;basicAuthUser&#34;: &#34;basicuser&#34;,
    &#34;basicAuthPassword&#34;: &#34;&#34;,
    &#34;withCredentials&#34;: false,
    &#34;isDefault&#34;: false,
    &#34;jsonData&#34;: {},
    &#34;secureJsonFields&#34;: {
      &#34;basicAuthPassword&#34;: true
    },
    &#34;version&#34;: 1,
    &#34;readOnly&#34;: false
  },
  &#34;id&#34;: 102,
  &#34;message&#34;: &#34;Datasource updated&#34;,
  &#34;name&#34;: &#34;test_datasource&#34;
}</pre>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Similar to <a href="#create-a-data-source">creating a data source</a>, <code>password</code> and <code>basicAuthPassword</code> should be defined under <code>secureJsonData</code> in order to be stored securely as an encrypted blob in the database. Then, the encrypted fields are listed under <code>secureJsonFields</code> section in the response.</p></blockquote></div>

<h2 id="delete-an-existing-data-source-by-id">Delete an existing data source by id</h2>
<p><code>DELETE /api/datasources/:datasourceId</code></p>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#delete-an-existing-data-source-by-uid">API for deleting an existing data source by UID</a> or to the <a href="#delete-an-existing-data-source-by-name">API for deleting an existing data source by its name</a></p></blockquote></div>

<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:delete</td>
          <td>datasources:*<br>datasources:id:*<br>datasources:id:1 (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-8">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>DELETE /api/datasources/1 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{&#34;message&#34;:&#34;Data source deleted&#34;}</pre>
<h2 id="delete-an-existing-data-source-by-uid">Delete an existing data source by uid</h2>
<p><code>DELETE /api/datasources/uid/:uid</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:delete</td>
          <td>datasources:*<br>datasources:uid:*<br>datasources:uid:kLtEtcRGk (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-9">Examples</h3>
<p><strong>Example request:</strong></p>
<pre>DELETE /api/datasources/uid/kLtEtcRGk HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;message&#34;: &#34;Data source deleted&#34;,
    &#34;id&#34;: 1
}</pre>
<h2 id="delete-an-existing-data-source-by-name">Delete an existing data source by name</h2>
<p><code>DELETE /api/datasources/name/:datasourceName</code></p>
<p><strong>Required permissions</strong></p>
<p>See note in the <a href="#data-source-api">introduction</a> for an explanation.</p>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Scope</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>datasources:delete</td>
          <td>datasources:*<br>datasources:name:*<br>datasources:name:test_datasource (single data source)</td>
      </tr>
  </tbody>
</table>
<h3 id="examples-10">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>DELETE /api/datasources/name/test_datasource HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;message&#34;:&#34;Data source deleted&#34;,
  &#34;id&#34;: 1
}</pre>
<h2 id="data-source-proxy-calls-by-id">Data source proxy calls by id</h2>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#data-source-proxy-calls">new data source API for proxying requests</a>.</p></blockquote></div>

<p><code>GET /api/datasources/proxy/:datasourceId/*</code></p>
<p>Proxies all calls to the actual data source identified by the <code>datasourceId</code>.</p>
<h2 id="data-source-proxy-calls">Data source proxy calls</h2>
<p><code>GET /api/datasources/proxy/uid/:uid/*</code></p>
<p>Proxies all calls to the actual data source identified by the <code>uid</code>.</p>
<h2 id="check-data-source-health-by-id">Check data source health by id</h2>
<blockquote>
<p><strong>Warning:</strong> This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#check-data-source-health">new data source health check API</a>.</p></blockquote>
<p><code>GET /api/datasources/:datasourceId/health</code></p>
<p>Makes a call to the health endpoint of data source identified by the given <code>datasourceId</code>. This is not mandatory - every plugin author has to <a href="/tutorials/build-a-data-source-backend-plugin/#add-support-for-health-checks" target="_blank">implement support for health checks</a> in their plugin themselves.</p>
<h3 id="examples-11">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET api/datasources/112/health HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;message&#34;: &#34;1. Successfully queried the CloudWatch metrics API.\n2. Successfully queried the CloudWatch logs API.&#34;,
  &#34;status&#34;: &#34;OK&#34;
}</pre>
<h2 id="check-data-source-health">Check data source health</h2>
<p><code>GET /api/datasources/uid/:uid/health</code></p>
<p>Makes a call to the health endpoint of data source identified by the given <code>uid</code>. This is not mandatory - every plugin author has to <a href="/tutorials/build-a-data-source-backend-plugin/#add-support-for-health-checks" target="_blank">implement support for health checks</a> in their plugin themselves.</p>
<h3 id="examples-12">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET api/datasources/uid/P8045C56BDA891CB2/health HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;message&#34;: &#34;1. Successfully queried the CloudWatch metrics API.\n2. Successfully queried the CloudWatch logs API.&#34;,
  &#34;status&#34;: &#34;OK&#34;
}</pre>
<h2 id="fetch-data-source-resources-by-id">Fetch data source resources by id</h2>


<div class="admonition admonition-warning"><blockquote><p class="title text-uppercase">Warning</p><p>This API is deprecated since Grafana v9.0.0 and will be removed in a future release. Refer to the <a href="#fetch-data-source-resources">new data source resources API</a>.</p></blockquote></div>

<p><code>GET /api/datasources/:datasourceId/resources/*</code></p>
<p>Makes a call to the resources endpoint of data source identified by the given <code>dashboardId</code>.</p>
<h3 id="examples-13">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET api/datasources/112/resources/dimension-keys?region=us-east-2&amp;namespace=AWS%2FEC2&amp;dimensionFilters=%7B%7D&amp;metricName=CPUUtilization HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

[
	{
		&#34;text&#34;: &#34;AutoScalingGroupName&#34;,
		&#34;value&#34;: &#34;AutoScalingGroupName&#34;,
		&#34;label&#34;: &#34;AutoScalingGroupName&#34;
	},
	{
		&#34;text&#34;: &#34;ImageId&#34;,
		&#34;value&#34;: &#34;ImageId&#34;,
		&#34;label&#34;: &#34;ImageId&#34;
	},
	{
		&#34;text&#34;: &#34;InstanceId&#34;,
		&#34;value&#34;: &#34;InstanceId&#34;,
		&#34;label&#34;: &#34;InstanceId&#34;
	},
	{
		&#34;text&#34;: &#34;InstanceType&#34;,
		&#34;value&#34;: &#34;InstanceType&#34;,
		&#34;label&#34;: &#34;InstanceType&#34;
	}
]</pre>
<h2 id="fetch-data-source-resources">Fetch data source resources</h2>
<p><code>GET /api/datasources/uid/:uid/resources/*</code></p>
<p>Makes a call to the resources endpoint of data source identified by the given <code>uid</code>.</p>
<h3 id="examples-14">Examples</h3>
<p><strong>Example Request</strong>:</p>
<pre>GET api/datasources/uid/P8045C56BDA891CB2/resources/dimension-keys?region=us-east-2&amp;namespace=AWS%2FEC2&amp;dimensionFilters=%7B%7D&amp;metricName=CPUUtilization HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

[
	{
		&#34;text&#34;: &#34;AutoScalingGroupName&#34;,
		&#34;value&#34;: &#34;AutoScalingGroupName&#34;,
		&#34;label&#34;: &#34;AutoScalingGroupName&#34;
	},
	{
		&#34;text&#34;: &#34;ImageId&#34;,
		&#34;value&#34;: &#34;ImageId&#34;,
		&#34;label&#34;: &#34;ImageId&#34;
	},
	{
		&#34;text&#34;: &#34;InstanceId&#34;,
		&#34;value&#34;: &#34;InstanceId&#34;,
		&#34;label&#34;: &#34;InstanceId&#34;
	},
	{
		&#34;text&#34;: &#34;InstanceType&#34;,
		&#34;value&#34;: &#34;InstanceType&#34;,
		&#34;label&#34;: &#34;InstanceType&#34;
	}
]</pre>
<h2 id="query-a-data-source">Query a data source</h2>
<p>Queries a data source having a backend implementation.</p>
<p><code>POST /api/ds/query</code></p>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Grafana&rsquo;s built-in data sources usually have a backend implementation.</p></blockquote></div>

<p><strong>Example request for the Test data source</strong>:</p>
<pre>POST /api/ds/query HTTP/1.1
Accept: application/json
Content-Type: application/json

{
   &#34;queries&#34;:[
      {
         &#34;refId&#34;:&#34;A&#34;,
         &#34;scenarioId&#34;:&#34;csv_metric_values&#34;,
         &#34;datasource&#34;:{
            &#34;uid&#34;:&#34;PD8C576611E62080A&#34;
         },
         &#34;format&#34;: &#34;table&#34;,
         &#34;maxDataPoints&#34;:1848,
         &#34;intervalMs&#34;:200,
         &#34;stringInput&#34;:&#34;1,20,90,30,5,0&#34;
      }
   ],
   &#34;from&#34;:&#34;now-5m&#34;,
   &#34;to&#34;:&#34;now&#34;
}</pre>
<p>JSON Body schema:</p>
<ul>
<li><strong>from/to</strong> – Specifies the time range for the queries. The time can be either epoch timestamps in milliseconds or relative using Grafana time units. For example, <code>now-5m</code>.</li>
<li><strong>queries</strong> – Specifies one or more queries. Must contain at least 1.</li>
<li><strong>queries.datasource.uid</strong> – Specifies the UID of data source to be queried. Each query in the request must have a unique <code>datasource</code>.</li>
<li><strong>queries.refId</strong> – Specifies an identifier of the query. Defaults to &ldquo;A&rdquo;.</li>
<li><strong>queries.format</strong> – Specifies the format the data should be returned in. Valid options are <code>time_series</code> or <code>table</code> depending on the data source.</li>
<li><strong>queries.maxDataPoints</strong> - Species the maximum amount of data points that a dashboard panel can render. Defaults to 100.</li>
<li><strong>queries.intervalMs</strong> - Specifies the time series time interval in milliseconds. Defaults to 1000.</li>
</ul>
<p>In addition, specific properties of each data source should be added in a request (for example <strong>queries.stringInput</strong> as shown in the request above). To better understand how to form a query for a certain data source, use the Developer Tools in your browser of choice and inspect the HTTP requests being made to <code>/api/ds/query</code>.</p>
<p><strong>Example Test data source time series query response:</strong></p>
<pre>{
  &#34;results&#34;: {
    &#34;A&#34;: {
      &#34;frames&#34;: [
        {
          &#34;schema&#34;: {
            &#34;refId&#34;: &#34;A&#34;,
            &#34;fields&#34;: [
              {
                &#34;name&#34;: &#34;time&#34;,
                &#34;type&#34;: &#34;time&#34;,
                &#34;typeInfo&#34;: {
                  &#34;frame&#34;: &#34;time.Time&#34;
                }
              },
              {
                &#34;name&#34;: &#34;A-series&#34;,
                &#34;type&#34;: &#34;number&#34;,
                &#34;typeInfo&#34;: {
                  &#34;frame&#34;: &#34;int64&#34;,
                  &#34;nullable&#34;: true
                }
              }
            ]
          },
          &#34;data&#34;: {
            &#34;values&#34;: [
              [1644488152084, 1644488212084, 1644488272084, 1644488332084, 1644488392084, 1644488452084],
              [1, 20, 90, 30, 5, 0]
            ]
          }
        }
      ]
    }
  }
}</pre>
<h4 id="status-codes">Status codes</h4>
<table>
  <thead>
      <tr>
          <th>Code</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>200</td>
          <td>All data source queries returned a successful response.</td>
      </tr>
      <tr>
          <td>400</td>
          <td>Bad request due to invalid JSON, missing content type, missing or invalid fields, etc. Or one or more data source queries were unsuccessful. Refer to the body for more details.</td>
      </tr>
      <tr>
          <td>403</td>
          <td>Access denied.</td>
      </tr>
      <tr>
          <td>404</td>
          <td>Either the data source or plugin required to fulfil the request could not be found.</td>
      </tr>
      <tr>
          <td>500</td>
          <td>Unexpected error. Refer to the body and/or server logs for more details.</td>
      </tr>
  </tbody>
</table>
