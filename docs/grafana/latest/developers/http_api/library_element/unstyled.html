<!DOCTYPE html>
<h1 id="library-element-api">Library Element API</h1>
<h2 id="identifier-id-vs-unique-identifier-uid">Identifier (id) vs unique identifier (uid)</h2>
<p>The identifier (ID) of a library element is an auto-incrementing numeric value that is unique per Grafana install.</p>
<p>The unique identifier (UID) of a library element uniquely identifies library elements between multiple Grafana installs. It&rsquo;s automatically generated unless you specify it during library element creation. The UID provides consistent URLs for accessing library elements and when syncing library elements between multiple Grafana installs.</p>
<p>The maximum length of a UID is 40 characters.</p>
<h2 id="get-all-library-elements">Get all library elements</h2>
<p><code>GET /api/library-elements</code></p>
<p>Returns a list of all library elements the authenticated user has permission to view. Use the <code>perPage</code> query parameter to control the maximum number of library elements returned; the default limit is 100. You can also use the <code>page</code> query parameter to fetch library elements from any page other than the first one.</p>
<p>Query parameters:</p>
<ul>
<li><code>searchString</code>: Part of the name or description searched for.</li>
<li><code>kind</code>: Kind of element to search for. Use <code>1</code> for library panels.</li>
<li><code>sortDirection</code>: Sort order of elements. Use <code>alpha-asc</code> for ascending and <code>alpha-desc</code> for descending sort order.</li>
<li><code>typeFilter</code>: A comma separated list of types to filter the elements by.</li>
<li><code>excludeUid</code>: Element UID to exclude from search results.</li>
<li><code>folderFilter</code>: A comma separated list of folder IDs to filter the elements by.</li>
<li><code>perPage</code>: The number of results per page; default is 100.</li>
<li><code>page</code>: The page for a set of records, given that only <code>perPage</code> records are returned at a time. Numbering starts at <code>1</code>.</li>
</ul>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/library-elements?perPage=10 HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
  &#34;result&#34;: {
     &#34;totalCount&#34;: 15,
     &#34;page&#34;: 1,
     &#34;perPage&#34;: 10
     &#34;elements&#34;: [
        {
            &#34;id&#34;: 25,
            &#34;orgId&#34;: 1,
            &#34;folderId&#34;: 0,
            &#34;uid&#34;: &#34;V--OrYHnz&#34;,
            &#34;name&#34;: &#34;API docs Example&#34;,
            &#34;kind&#34;: 1,
            &#34;type&#34;: &#34;text&#34;,
            &#34;description&#34;: &#34;&#34;,
            &#34;model&#34;: {...},
            &#34;version&#34;: 1,
            &#34;meta&#34;: {
                &#34;folderName&#34;: &#34;General&#34;,
                &#34;folderUid&#34;: &#34;&#34;,
                &#34;connectedDashboards&#34;: 1,
                &#34;created&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
                &#34;updated&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
                &#34;createdBy&#34;: {
                    &#34;id&#34;: 1,
                    &#34;name&#34;: &#34;admin&#34;,
                    &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
                },
                &#34;updatedBy&#34;: {
                    &#34;id&#34;: 1,
                    &#34;name&#34;: &#34;admin&#34;,
                    &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
                }
            }
        },
        {...}
        {...}
     ],
  }
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Found</li>
<li><code>401</code>: Unauthorized</li>
</ul>
<h2 id="get-library-element-by-uid">Get library element by uid</h2>
<p><code>GET /api/library-elements/:uid</code></p>
<p>Returns a library element with the given UID.</p>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/library-elements/V--OrYHnz HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;result&#34;: {
      &#34;id&#34;: 25,
      &#34;orgId&#34;: 1,
      &#34;folderId&#34;: 0,
      &#34;uid&#34;: &#34;V--OrYHnz&#34;,
      &#34;name&#34;: &#34;API docs Example&#34;,
      &#34;kind&#34;: 1,
      &#34;type&#34;: &#34;text&#34;,
      &#34;description&#34;: &#34;&#34;,
      &#34;model&#34;: {...},
      &#34;version&#34;: 1,
      &#34;meta&#34;: {
          &#34;folderName&#34;: &#34;General&#34;,
          &#34;folderUid&#34;: &#34;&#34;,
          &#34;connectedDashboards&#34;: 1,
          &#34;created&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
          &#34;updated&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
          &#34;createdBy&#34;: {
              &#34;id&#34;: 1,
              &#34;name&#34;: &#34;admin&#34;,
              &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
          },
          &#34;updatedBy&#34;: {
              &#34;id&#34;: 1,
              &#34;name&#34;: &#34;admin&#34;,
              &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
          }
      }
   }
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Found</li>
<li><code>401</code>: Unauthorized</li>
<li><code>404</code>: Library element not found</li>
</ul>
<h2 id="get-library-element-by-name">Get library element by name</h2>
<p><code>GET /api/library-elements/name/:name</code></p>
<p>Returns a library element with the given name</p>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/library-elements/name/API docs Example HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;result&#34;: [
        {
            &#34;id&#34;: 25,
            &#34;orgId&#34;: 1,
            &#34;folderId&#34;: 0,
            &#34;uid&#34;: &#34;V--OrYHnz&#34;,
            &#34;name&#34;: &#34;API docs Example&#34;,
            &#34;kind&#34;: 1,
            &#34;type&#34;: &#34;text&#34;,
            &#34;description&#34;: &#34;&#34;,
            &#34;model&#34;: {...},
            &#34;version&#34;: 1,
            &#34;meta&#34;: {
                &#34;folderName&#34;: &#34;General&#34;,
                &#34;folderUid&#34;: &#34;&#34;,
                &#34;connectedDashboards&#34;: 1,
                &#34;created&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
                &#34;updated&#34;: &#34;2021-09-27T09:56:17+02:00&#34;,
                &#34;createdBy&#34;: {
                    &#34;id&#34;: 1,
                    &#34;name&#34;: &#34;admin&#34;,
                    &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
                },
                &#34;updatedBy&#34;: {
                    &#34;id&#34;: 1,
                    &#34;name&#34;: &#34;admin&#34;,
                    &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
                }
            }
        }
    ]
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Found</li>
<li><code>401</code>: Unauthorized</li>
<li><code>404</code>: Library element not found</li>
</ul>
<h2 id="get-library-element-connections">Get library element connections</h2>
<p><code>GET /api/library-elements/:uid/connections</code></p>
<p>Returns a list of connections for a library element based on the UID specified.</p>
<p><strong>Example Request</strong>:</p>
<pre>GET /api/library-elements/V--OrYHnz/connections HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;result&#34;: [
        {
            &#34;id&#34;: 148, // Deprecated: will be removed in the future.
            &#34;kind&#34;: 1,
            &#34;elementId&#34;: 25,
            &#34;connectionId&#34;: 527,
            &#34;connectionUid&#34;: &#34;dHEquNzGz&#34;,
            &#34;created&#34;: &#34;2021-09-27T10:00:07+02:00&#34;,
            &#34;createdBy&#34;: {
                &#34;id&#34;: 1,
                &#34;name&#34;: &#34;admin&#34;,
                &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
            }
        }
    ]
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Found</li>
<li><code>401</code>: Unauthorized</li>
<li><code>404</code>: Library element not found</li>
</ul>
<h2 id="create-library-element">Create library element</h2>
<p><code>POST /api/library-elements</code></p>
<p>Creates a new library element.</p>
<p>JSON Body schema:</p>
<ul>
<li><code>folderId</code>: ID of the folder where the library element is stored. It is deprecated since Grafana v9</li>
<li><code>folderUid</code>: Optional, the UID of the folder where the library element is stored, empty string when it is at the root level.</li>
<li><code>name</code>: Optional, the name of the library element.</li>
<li><code>model</code>: The JSON model for the library element.</li>
<li><code>kind</code>: Kind of element to create, Use <code>1</code> for library panels.</li>
<li><code>uid</code>: Optional, the <a href="#identifier-id-vs-unique-identifier-uid">unique identifier</a>.</li>
</ul>
<p><strong>Example Request</strong>:</p>
<pre>POST /api/library-elements HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;uid&#34;: &#34;nErXDvCkzz&#34;,
  &#34;folderUid&#34;: &#34;&#34;,
  &#34;name&#34;: &#34;Example library panel&#34;,
  &#34;model&#34;: {...},
  &#34;kind&#34;: 1
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;result&#34;: {
        &#34;id&#34;: 28,
        &#34;orgId&#34;: 1,
        &#34;folderId&#34;: 0,
        &#34;folderUid&#34;: &#34;&#34;,
        &#34;uid&#34;: &#34;nErXDvCkzz&#34;,
        &#34;name&#34;: &#34;Example library panel&#34;,
        &#34;kind&#34;: 1,
        &#34;type&#34;: &#34;&#34;,
        &#34;description&#34;: &#34;&#34;,
        &#34;model&#34;: {...},
        &#34;version&#34;: 1,
        &#34;meta&#34;: {
            &#34;folderName&#34;: &#34;General&#34;,
            &#34;folderUid&#34;: &#34;&#34;,
            &#34;connectedDashboards&#34;: 0,
            &#34;created&#34;: &#34;2021-09-30T09:14:22.378307+02:00&#34;,
            &#34;updated&#34;: &#34;2021-09-30T09:14:22.378307+02:00&#34;,
            &#34;createdBy&#34;: {
                &#34;id&#34;: 1,
                &#34;name&#34;: &#34;admin&#34;,
                &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
            },
            &#34;updatedBy&#34;: {
                &#34;id&#34;: 1,
                &#34;name&#34;: &#34;admin&#34;,
                &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
            }
        }
    }
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Created</li>
<li><code>400</code>: Errors (for example, name or UID already exists, invalid JSON, missing or invalid fields, and so on).</li>
<li><code>401</code>: Unauthorized</li>
<li><code>403</code>: Access denied</li>
</ul>
<h2 id="update-library-element">Update library element</h2>
<p><code>PATCH /api/library-elements/:uid</code></p>
<p>Updates an existing library element identified by uid.</p>
<p>JSON Body schema:</p>
<ul>
<li><code>folderId</code>: ID of the folder where the library element is stored. It is deprecated since Grafana v9</li>
<li><code>folderUid</code>: UID of the folder where the library element is stored, empty string when it is at the root level.</li>
<li><code>name</code>: Name of the library element.</li>
<li><code>model</code>: The JSON model for the library element.</li>
<li><code>kind</code>: Kind of element to create. Use <code>1</code> for library panels.</li>
<li><code>version</code>: Version of the library element you are updating.</li>
<li><code>uid</code>: Optional, the <a href="#identifier-id-vs-unique-identifier-uid">unique identifier</a>.</li>
</ul>
<p><strong>Example Request</strong>:</p>
<pre>PATCH /api/library-elements/nErXDvCkzz HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk

{
  &#34;name&#34;: &#34;Renamed library panel&#34;,
  &#34;kind&#34;: 1,
  &#34;version&#34;: 1
}</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;result&#34;: {
        &#34;id&#34;: 28,
        &#34;orgId&#34;: 1,
        &#34;folderId&#34;: 0,
        &#34;folderUid&#34;: &#34;&#34;,
        &#34;uid&#34;: &#34;nErXDvCkzz&#34;,
        &#34;name&#34;: &#34;Renamed library panel&#34;,
        &#34;kind&#34;: 1,
        &#34;type&#34;: &#34;&#34;,
        &#34;description&#34;: &#34;&#34;,
        &#34;model&#34;: {
            &#34;description&#34;: &#34;&#34;,
            &#34;type&#34;: &#34;&#34;
        },
        &#34;version&#34;: 2,
        &#34;meta&#34;: {
            &#34;folderName&#34;: &#34;General&#34;,
            &#34;folderUid&#34;: &#34;&#34;,
            &#34;connectedDashboards&#34;: 0,
            &#34;created&#34;: &#34;2021-09-30T09:14:22+02:00&#34;,
            &#34;updated&#34;: &#34;2021-09-30T09:25:57.697214+02:00&#34;,
            &#34;createdBy&#34;: {
                &#34;id&#34;: 1,
                &#34;name&#34;: &#34;admin&#34;,
                &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
            },
            &#34;updatedBy&#34;: {
                &#34;id&#34;: 1,
                &#34;name&#34;: &#34;admin&#34;,
                &#34;avatarUrl&#34;: &#34;/avatar/46d229b033af06a191ff2267bca9ae56&#34;
            }
        }
    }
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Updated</li>
<li><code>400</code>: Errors (for example, name or UID already exists, invalid JSON, missing or invalid fields, and so on).</li>
<li><code>401</code>: Unauthorized</li>
<li><code>403</code>: Access denied</li>
<li><code>404</code>: Library element not found</li>
<li><code>412</code>: Version mismatch</li>
</ul>
<h2 id="delete-library-element">Delete library element</h2>
<p><code>DELETE /api/library-elements/:uid</code></p>
<p>Deletes an existing library element as specified by the UID. This operation cannot be reverted.</p>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>You cannot delete a library element that is connected. This operation cannot be reverted.</p></blockquote></div>

<p><strong>Example Request</strong>:</p>
<pre>DELETE /api/library-elements/nErXDvCkzz HTTP/1.1
Accept: application/json
Content-Type: application/json
Authorization: Bearer eyJrIjoiT0tTcG1pUlY2RnVKZTFVaDFsNFZXdE9ZWmNrMkZYbk</pre>
<p><strong>Example Response</strong>:</p>
<pre>HTTP/1.1 200
Content-Type: application/json

{
    &#34;message&#34;: &#34;Library element deleted&#34;,
    &#34;id&#34;: 28
}</pre>
<p>Status Codes:</p>
<ul>
<li><code>200</code>: Deleted</li>
<li><code>401</code>: Unauthorized</li>
<li><code>400</code>: Bad request</li>
<li><code>403</code>: Access denied</li>
<li><code>404</code>: Library element not found</li>
</ul>
