<!DOCTYPE html>
<h1 id="configure-security">Configure security</h1>
<p>If you run non-Grafana web services on your Grafana server or within its local network, then they might be vulnerable to exploitation through the Grafana data source proxy or other methods.</p>
<p>To prevent this type of exploitation from happening, we recommend that you apply one or more of the precautions listed below.</p>
<h2 id="limit-ip-addresseshostnames-for-data-source-url">Limit IP addresses/hostnames for data source URL</h2>
<p>You can configure Grafana to only allow certain IP addresses or hostnames to be used as data source URLs and proxied through the Grafana data source proxy. Refer to <a href="../configure-grafana/#data_source_proxy_whitelist">data_source_proxy_whitelist</a> for usage instructions.</p>
<h2 id="request-security">Request security</h2>
<p>The request security configuration option allows users to limit requests from the Grafana server. It targets requests that are generated by users. For more information, refer to <a href="configure-request-security/">Request security</a>.</p>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Request security is available in Grafana Enterprise v7.4 and later versions.</p></blockquote></div>

<h2 id="firewall-rules">Firewall rules</h2>
<p>Configure a firewall to restrict Grafana from making network requests to sensitive internal web services.</p>
<p>There are many firewall tools available. Refer to the documentation for your specific security tool. For example, Linux users can use <a href="https://en.wikipedia.org/wiki/Iptables" target="_blank" rel="noopener noreferrer">iptables</a>.</p>
<h2 id="proxy-server">Proxy server</h2>
<p>You can require all network requests made by Grafana to go through a proxy server.</p>
<p>Self-hosted reverse proxy options include but are not limited to:</p>
<ul>
<li><a href="https://www.pomerium.com/docs" target="_blank" rel="noopener noreferrer">Pomerium</a>, which has a <a href="https://www.pomerium.com/docs/guides/grafana" target="_blank" rel="noopener noreferrer">guide for securing Grafana</a></li>
<li><a href="https://docs.nginx.com/nginx/" target="_blank" rel="noopener noreferrer">NGINX</a> using their <a href="https://docs.nginx.com/nginx/admin-guide/security-controls/configuring-http-basic-authentication/" target="_blank" rel="noopener noreferrer">guide on restricting access with HTTP basic authentication</a></li>
<li><a href="https://github.com/oauth2-proxy/oauth2-proxy" target="_blank" rel="noopener noreferrer">OAuth2 proxy</a></li>
</ul>
<h3 id="configure-cors">Configure CORS</h3>
<p>If you want to enable CORS for your Grafana instance, run Grafana behind a reverse proxy and configure the CORS headers in the reverse proxy.</p>
<p>For more information, refer to <a href="/tutorials/run-grafana-behind-a-proxy/">Run Grafana behind a reverse proxy</a>.</p>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Grafana doesn&rsquo;t recommend using wildcard values (<code>*</code>) as header values and recommends using a URL instead.</p></blockquote></div>

<h2 id="limit-viewer-query-permissions">Limit Viewer query permissions</h2>
<p>Users with the <code>Viewer role</code> can enter <em>any possible query</em> in <em>any</em> of the data sources available in the <strong>organization</strong>, not just the queries that are defined on the dashboards for which the user has Viewer permissions.</p>
<p>For example, in a Grafana instance with one data source, one dashboard, and one panel that has one query defined, you might assume that a Viewer can only see the result of the query defined in that panel. Actually, the Viewer has access to send any query to the data source. With a command-line tool like curl (there are many tools for this), the Viewer can make their own query to the data source and potentially access sensitive data.</p>
<p>To address this vulnerability, you can restrict data source query access in the following ways:</p>
<ul>
<li>Create multiple data sources with some restrictions added in data source configuration that restrict access (like database name or credentials). Then use the <a href="../../administration/data-source-management/#data-source-permissions">Data Source Permissions</a> Enterprise feature to restrict user access to the data source in Grafana.</li>
<li>Create a separate Grafana organization, and in that organization, create a separate data source. Make sure the data source has some option/user/credentials setting that limits access to a subset of the data. Not all data sources have an option to limit access.</li>
</ul>
<h2 id="implications-of-enabling-anonymous-access-to-dashboards">Implications of enabling anonymous access to dashboards</h2>
<p>When you enable anonymous access in Grafana, any visitor or user can use Grafana as a Viewer without signing in. This section lists the security implications of enabling Anonymous access.</p>
<ul>
<li>Anyone with the URL of a dashboard accessible by the Viewer role can access that dashboard.</li>
<li>New dashboards are publicly available unless the dashboard creator hides them from <strong>all Viewers</strong>.</li>
<li>Anyone can edit or delete dashboards that have granted Edit or Admin abilities to Viewers.</li>
<li>Anyone can make <code>view</code> calls to the API and list all folders, dashboards, and data sources.</li>
<li>Anyone can make arbitrary queries to any data source that the Grafana instance is configured with.</li>
</ul>
