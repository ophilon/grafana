<!DOCTYPE html>
<h1 id="notification-template-examples">Notification template examples</h1>
<p>Notification templates allows you to change the default notification messages.</p>
<p>You can modify the content and format of notification messages. For example, you can customize the content to show only specific information or adjust the format to suit a particular contact point, such as Slack or Email.</p>


<div class="admonition admonition-note"><blockquote><p class="title text-uppercase">Note</p><p>Avoid adding extra information about alert instances in notification templates, as this information is only visible in the notification message.</p>
<p>Instead, you should 
    <a href="/docs/grafana/latest/alerting/alerting-rules/templates/">use annotations or labels</a> to add information directly to the alert, ensuring it&rsquo;s also visible in the alert state and alert history within Grafana. You can then print the new alert annotation or label in notification templates.</p></blockquote></div>

<p>This page provides various examples illustrating how to template common notification messages. For more details about notification templates, refer to:</p>
<ul>
<li>
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/">Template notifications</a></li>
<li>
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/manage-notification-templates/">Select, create, and preview a notification template</a></li>
<li>
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/">Notification template reference</a></li>
</ul>
<h2 id="basic-examples">Basic examples</h2>
<p>Notification templates can access the 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#notification-data">notification data</a> using the dot (<code>.</code>). The following examples demonstrate some basic uses of the 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/language/">template language</a>.</p>
<p>For instance, to check if there are common labels (<code>.CommonLabels</code>) for all alerts in the notification, use <code>if</code>:</p>
<pre>{{ define &#34;custom_message&#34; -}}
{{ if .CommonLabels }}
Alerts have common labels
{{ else }}
There are no common labels
{{ end }}
{{ end }}</pre>
<p>To iterate on the alerts in the notification and print a specific label, use <code>range</code> and <code>index</code>:</p>
<pre>{{ define &#34;custom_message&#34; -}}
{{ range .Alerts }}
The name of the alert is {{ index .Labels &#34;alertname&#34; }}
{{ end }}
{{ end }}</pre>
<p>Alternatively, you can use the <code>.</code> notation to print the value of the key.</p>
<pre>{{ define &#34;custom_message&#34; -}}
{{ range .Alerts }}
The name of the alert is {{ .Labels.alertname }}
{{ end }}
{{ end }}</pre>
<p>You can then use the template by passing the 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#notification-data">notification data (dot <code>.</code>)</a>:</p>
<pre>{{ template &#34;custom_message&#34; . }}</pre>
<pre>The name of the alert is InstanceDown

The name of the alert is CpuOverload</pre>
<h2 id="print-alerts-with-summary-and-description">Print alerts with summary and description</h2>
<p>Here&rsquo;s an example that displays the summary and description annotations for each alert in the notification.</p>
<pre>{{ define &#34;custom.alerts&#34; -}}
{{ len .Alerts }} alert(s)
{{ range .Alerts -}}
  {{ template &#34;alert.summary_and_description&#34; . -}}
{{ end -}}
{{ end -}}
{{ define &#34;alert.summary_and_description&#34; }}
  Summary: {{.Annotations.summary}}
  Status: {{ .Status }}
  Description: {{.Annotations.description}}
{{ end -}}</pre>
<p>In this example:</p>
<ul>
<li>A template (<code>alert.summary_and_description</code>) is defined to print the <code>summary</code>, <code>status</code>, and <code>description</code> of one 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#alert">alert</a>.</li>
<li>The main template <code>custom.alerts</code> iterates the list of alerts (<code>.Alerts</code>) in 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#notification-data">notification data</a>, executing the <code>alert.summary_and_description</code> template to print the details of each alert.</li>
</ul>
<p>Execute the template by passing the dot (<code>.</code>):</p>
<pre>{{ template &#34;custom.alerts&#34; . }}</pre>
<pre>2 alert(s)

  Summary: The database server db1 has exceeded 75% of available disk space.
  Status: firing
  Description: This alert fires when a database server is at risk of running out of disk space. You should take measures to increase the maximum available disk space as soon as possible to avoid possible corruption.

  Summary: The web server web1 has been responding to 5% of HTTP requests with 5xx errors for the last 5 minutes.
  Status: resolved
  Description: This alert fires when a web server responds with more 5xx errors than is expected. This could be an issue with the web server or a backend service.</pre>
<h2 id="print-firing-and-resolved-alerts">Print firing and resolved alerts</h2>
<p>The following example is similar to the previous one, but it separates firing and resolved alerts.</p>
<pre>{{ define &#34;custom.firing_and_resolved_alerts&#34; -}}
{{ len .Alerts.Resolved }} resolved alert(s)
{{ range .Alerts.Resolved -}}
  {{ template &#34;alert.summary_and_description&#34; . -}}
{{ end }}
{{ len .Alerts.Firing }} firing alert(s)
{{ range .Alerts.Firing -}}
  {{ template &#34;alert.summary_and_description&#34; . -}}
{{ end -}}
{{ end -}}
{{ define &#34;alert.summary_and_description&#34; }}
  Summary: {{.Annotations.summary}}
  Status: {{ .Status }}
  Description: {{.Annotations.description}}
{{ end -}}</pre>
<p>Instead of <code>.Alerts</code>, the template accesses <code>.Alerts.Firing</code> and <code>.Alerts.Resolved</code> separately to print details for each alert.</p>
<p>Run the template by passing the dot (<code>.</code>):</p>
<pre>{{ template &#34;custom.firing_and_resolved_alerts&#34; . }}</pre>
<pre>1 resolved alert(s)

  Summary: The database server db1 has exceeded 75% of available disk space.
  Status: resolved
  Description: This alert fires when a database server is at risk of running out of disk space. You should take measures to increase the maximum available disk space as soon as possible to avoid possible corruption.

1 firing alert(s)

  Summary: The web server web1 has been responding to 5% of HTTP requests with 5xx errors for the last 5 minutes.
  Status: firing
  Description: This alert fires when a web server responds with more 5xx errors than is expected. This could be an issue with the web server or a backend service.</pre>
<h2 id="print-common-labels-and-annotations">Print common labels and annotations</h2>
<p>This example displays only the labels and annotations that are common to all alerts in the notification.</p>
<pre>{{ define &#34;custom.common_labels_and_annotations&#34; -}}
{{ len .Alerts.Resolved }} resolved alert(s)
{{ len .Alerts.Firing }} firing alert(s)
Common labels: {{ len .CommonLabels.SortedPairs }}
{{ range .CommonLabels.SortedPairs -}}
- {{ .Name }} = {{ .Value }}
{{ end }}
Common annotations: {{ len .CommonAnnotations.SortedPairs }}
{{ range .CommonAnnotations.SortedPairs }}
- {{ .Name }} = {{ .Value }}
{{ end }}
{{ end -}}</pre>
<p>Note that <code>.CommonAnnotations</code> and <code>.CommonLabels</code> are part of 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#notification-data">notification data</a>.</p>
<p>Execute the template by passing the dot (<code>.</code>) as argument:</p>
<pre>{{ template &#34;custom.common_labels_and_annotations&#34; . }}</pre>
<pre>1 resolved alert(s)
1 firing alert(s)
Common labels: 2
- grafana_folder = server_alerts
- team = server_admin

Common annotations: 0</pre>
<h2 id="print-individual-labels-and-annotations">Print individual labels and annotations</h2>
<p>This example displays all labels and annotations for each 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#alert">alert</a> in the notification.</p>
<pre>{{ define &#34;custom.alert_labels_and_annotations&#34; -}}
{{ len .Alerts.Resolved }} resolved alert(s)
{{ range .Alerts.Resolved -}}
  {{ template &#34;alert.labels_and_annotations&#34; . -}}
{{ end }}
{{ len .Alerts.Firing }} firing alert(s)
{{ range .Alerts.Firing -}}
  {{ template &#34;alert.labels_and_annotations&#34; . -}}
{{ end -}}
{{ end -}}
{{ define &#34;alert.labels_and_annotations&#34; }}
Alert labels: {{ len .Labels.SortedPairs }}
{{ range .Labels.SortedPairs -}}
- {{ .Name }} = {{ .Value }}
{{ end -}}
Alert annotations: {{ len .Annotations.SortedPairs }}
{{ range .Annotations.SortedPairs -}}
- {{ .Name }} = {{ .Value }}
{{ end -}}
{{ end -}}</pre>
<p>In this example:</p>
<ul>
<li>The <code>custom.alert_labels_and_annotations</code> template iterates over the list of resolved and firing alerts, similar to previous examples. It then executes <code>alert.labels_and_annotations</code> for each alert.</li>
<li>The <code>alert.labels_and_annotations</code> template prints all the alert labels and annotations by accessing <code>.Labels.SortedPairs</code> and <code>.Annotations.SortedPairs</code>.</li>
</ul>
<p>Run the template by passing the dot (<code>.</code>):</p>
<pre>{{ template &#34;custom.alert_labels_and_annotations&#34; . }}</pre>
<pre>1 resolved alert(s)

Alert labels: 4
- alertname = db_server_disk_space
- grafana_folder = server_alerts
- server = db1
- team = server_admin

Alert annotations: 2
- summary = The database server db1 has exceeded 75% of available disk space.
- description = This alert fires when a database server is at risk of running out of disk space. You should take measures to increase the maximum available disk space as soon as possible to avoid possible corruption.

1 firing alert(s)

Alert labels: 4
- alertname = web_server_http_errors
- grafana_folder = server_alerts
- server = web1
- team = server_admin

Alert annotations: 2
- summary = The web server web1 has been responding to 5% of HTTP requests with 5xx errors for the last 5 minutes.
- description = This alert fires when a web server responds with more 5xx errors than is expected. This could be an issue with the web server or a backend service.</pre>
<h2 id="print-urls-for-runbook-and-alert-data-in-grafana">Print URLs for runbook and alert data in Grafana</h2>
<p>Note that the following example works only for Grafana-managed alerts. It displays some 
    <a href="/docs/grafana/latest/alerting/configure-notifications/template-notifications/reference/#alert">alert data</a> such as <code>DashboardURL</code>, <code>PanelURL</code>, and <code>SilenceURL</code>, which are exclusive to Grafana-managed alerts.</p>
<pre>{{ define &#34;custom.alert_additional_details&#34; -}}
{{ len .Alerts.Resolved }} resolved alert(s)
{{ range .Alerts.Resolved -}}
  {{ template &#34;alert.additional_details&#34; . -}}
{{ end }}
{{ len .Alerts.Firing }} firing alert(s)
{{ range .Alerts.Firing -}}
  {{ template &#34;alert.additional_details&#34; . -}}
{{ end -}}
{{ end -}}
{{ define &#34;alert.additional_details&#34; }}
- Dashboard: {{ .DashboardURL }}
- Panel: {{ .PanelURL }}
- AlertGenerator: {{ .GeneratorURL }}
- Silence: {{ .SilenceURL }}
- RunbookURL: {{ .Annotations.runbook_url}}
{{ end -}}</pre>
<p>Pass the dot (<code>.</code>) to execute the template:</p>
<pre>{{ template &#34;custom.alert_additional_details&#34; . }}</pre>
<pre>1 resolved alert(s)

- Dashboard: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395
- Panel: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395&amp;viewPanel=31
- AlertGenerator: ?orgId=1
- Silence: https://example.com/alerting/silence/new
- RunbookURL: https://example.com/on-call/db_server_disk_space

1 firing alert(s)

- Dashboard: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395
- Panel: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395&amp;viewPanel=31
- AlertGenerator: ?orgId=1
- Silence: https://example.com/alerting/silence/new
- RunbookURL: https://example.com/on-call/web_server_http_errors</pre>
<h2 id="print-a-notification-title-or-subject">Print a notification title or subject</h2>
<p>A title or subject provides a one-line summary of the notification content.</p>
<p>Here’s a basic example that displays the number of firing and resolved alerts in the notification.</p>
<pre>{{ define &#34;custom_title&#34; -}}
{{ if gt (.Alerts.Firing | len) 0 }}🚨 {{ .Alerts.Firing | len }} firing alerts. {{ end }}{{ if gt (.Alerts.Resolved | len) 0 }}✅ {{ .Alerts.Resolved | len }} resolved alerts.{{ end }}
{{ end -}}</pre>
<p>Execute the template by passing the dot (<code>.</code>) as argument:</p>
<pre>{{ template &#34;custom_title&#34; . }}</pre>
<pre>🚨 1 firing alerts. ✅ 1 resolved alerts.</pre>
<p>The next example is a copy of the default title/subject template used in Grafana.</p>
<pre>{{ define &#34;copy_of_default_title&#34; -}}
[{{ .Status | toUpper }}{{ if eq .Status &#34;firing&#34; }}:{{ .Alerts.Firing | len }}{{ if gt (.Alerts.Resolved | len) 0 }}, RESOLVED:{{ .Alerts.Resolved | len }}{{ end }}{{ end }}] {{ .GroupLabels.SortedPairs.Values | join &#34; &#34; }} {{ if gt (len .CommonLabels) (len .GroupLabels) }}({{ with .CommonLabels.Remove .GroupLabels.Names }}{{ .Values | join &#34; &#34; }}{{ end }}){{ end }}
{{ end }}</pre>
<p>This is a more advanced example:</p>
<ul>
<li>Prints the number of firing and resolved alerts in the notification.</li>
<li>Outputs <code>.GroupLabels</code>, the labels used to 
    <a href="/docs/grafana/latest/alerting/fundamentals/notifications/group-alert-notifications/">group multiple alerts in one notification</a>.</li>
<li>Prints <code>CommonLabels</code>, excluding labels in <code>.GroupLabels</code>.</li>
</ul>
<p>Execute the template by passing the dot (<code>.</code>):</p>
<pre>{{ template &#34;copy_of_default_title&#34; . }}</pre>
<pre>[FIRING:1, RESOLVED:1] api warning (sql_db)</pre>
<h2 id="print-a-link-to-a-dashboard-with-time-range">Print a link to a dashboard with time range</h2>
<p>You can include a link to a dashboard or panel in your alert notifications. This is useful when the alert rule is created from a dashboard panel or monitors a target visualized in an existing dashboard.</p>
<p>Including a dashboard link in the notification helps responders quickly navigate to the relevant context for investigation.</p>
<p>Use one of the following methods to include a dashboard link with the correct time range in the alert notification:</p>
<ol>
<li>
<p>You can 
    <a href="/docs/grafana/latest/alerting/alerting-rules/link-alert-rules-to-panels/">link the alert rule to a panel</a>. This includes the dashboard and panel URLs via <code>{{.Alert.DashboardURL}}</code> and <code>{{.Alert.PanelURL}}</code>.</p>
<pre>{{ define &#34;custom.link_to_dashboard&#34; -}}
{{ range .Alerts -}}
  Dashboard: {{.DashboardURL}}
  Panel: {{ .PanelURL }}
{{ end -}}
{{ end -}}</pre>
<p>Run the template using:</p>
<pre>{{ template &#34;custom.link_to_dashboard&#34; . }}</pre>
<pre>Dashboard: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395
Panel: https://example.com/d/uiyahbsdaubsd?from=1740070380000&amp;orgId=1&amp;to=1740074106395&amp;viewPanel=31</pre>
<p>These URLs include a time range based on the alert’s timing:</p>
<ul>
<li><code>from</code>: One hour before the alert started.</li>
<li><code>to</code>: The current time if the alert is firing, or the alert’s end time if resolved.</li>
</ul>
</li>
<li>
<p>Alternatively, you can use a custom annotation to set the dashboard URL and build the full URL using the <code>from</code> and <code>to</code> query parameters derived from <code>{{.Alert.StartsAt}}</code> and <code>{{.Alert.EndsAt}}</code>.</p>
<pre>{{ define &#34;custom.my_dashboard_url_annotation&#34; -}}
{{ range .Alerts -}}

  {{/* StartsAt - 1h */}}
  {{- $from := (.StartsAt.Add -3600000000000).UnixMilli }}

  {{- $to := &#34;&#34; }}
  {{- if eq .Status &#34;resolved&#34; }}
     {{- $to = (.EndsAt).UnixMilli }}
  {{- else -}}
    {{/* Use current time if alert is firing */}}
    {{- $to = (time.Now).UnixMilli }}
  {{- end -}}

  Dashboard: {{.Annotations.MyDashboardURL}}?from={{$from}}&amp;to={{$to}}
{{ end }}
{{ end }}</pre>
<p>To use this template, define a custom annotation named <code>MyDashboardURL</code> that contains the base dashboard URL without <code>from</code> and <code>to</code> parameters. For example: <code>http://localhost:3000/d/uiyahbsdaubsd</code>.</p>
<p>Run the template using:</p>
<pre>{{ template &#34;custom.my_dashboard_url_annotation&#34; . }}</pre>
<pre>Dashboard: http://localhost:3000/d/uiyahbsdaubsd?from=1740070380000&amp;to=1740071880000</pre>
</li>
</ol>
<h2 id="custom-json-payload">Custom JSON payload</h2>
<p>The 
    <a href="/docs/grafana/latest/alerting/configure-notifications/manage-contact-points/integrations/webhook-notifier/#custom-payload">custom payload option</a> in the webhook contact point allows you to customize the payload of webhook notifications using a custom template.</p>
<p>The following example generates a custom JSON payload by executing other templates with <code>tmpl.Exec</code>, and using functions like <code>coll.Dict</code> and <code>data.ToJSON</code> to process and format JSON data.</p>


<div data-shared="alerts/example-custom-json-payload.md">
            <pre>{{ define &#34;webhook.custom.payload&#34; -}}
  {{ coll.Dict
  &#34;receiver&#34; .Receiver
  &#34;status&#34; .Status
  &#34;alerts&#34; (tmpl.Exec &#34;webhook.custom.simple_alerts&#34; .Alerts | data.JSON)
  &#34;groupLabels&#34; .GroupLabels
  &#34;commonLabels&#34; .CommonLabels
  &#34;commonAnnotations&#34; .CommonAnnotations
  &#34;externalURL&#34; .ExternalURL
  &#34;version&#34; &#34;1&#34;
  &#34;orgId&#34;  (index .Alerts 0).OrgID
  &#34;truncatedAlerts&#34;  .TruncatedAlerts
  &#34;groupKey&#34; .GroupKey
  &#34;state&#34;  (tmpl.Inline &#34;{{ if eq .Status \&#34;resolved\&#34; }}ok{{ else }}alerting{{ end }}&#34; . )
  &#34;allVariables&#34;  .Vars
  &#34;title&#34; (tmpl.Exec &#34;default.title&#34; . )
  &#34;message&#34; (tmpl.Exec &#34;default.message&#34; . )
  | data.ToJSONPretty &#34; &#34;}}
{{- end }}

{{- /* Embed json templates in other json templates. */ -}}
{{ define &#34;webhook.custom.simple_alerts&#34; -}}
  {{- $alerts := coll.Slice -}}
  {{- range . -}}
    {{ $alerts = coll.Append (coll.Dict
    &#34;status&#34; .Status
    &#34;labels&#34; .Labels
    &#34;startsAt&#34; .StartsAt
    &#34;endsAt&#34; .EndsAt
    ) $alerts}}
  {{- end -}}
  {{- $alerts | data.ToJSON -}}
{{- end }}</pre>
</div>

        
<pre>{
 &#34;alerts&#34;: [
  {
   &#34;endsAt&#34;: &#34;0001-01-01T00:00:00Z&#34;,
   &#34;labels&#34;: {
    &#34;alertname&#34;: &#34;InstanceDown&#34;,
    &#34;grafana_folder&#34;: &#34;Test Folder&#34;,
    &#34;instance&#34;: &#34;instance1&#34;
   },
   &#34;startsAt&#34;: &#34;2025-04-21T10:19:46.179Z&#34;,
   &#34;status&#34;: &#34;firing&#34;
  },
  {
   &#34;endsAt&#34;: &#34;2025-04-22T10:19:46.179Z&#34;,
   &#34;labels&#34;: {
    &#34;alertname&#34;: &#34;CpuUsage&#34;,
    &#34;grafana_folder&#34;: &#34;Test Folder&#34;,
    &#34;instance&#34;: &#34;instance1&#34;
   },
   &#34;startsAt&#34;: &#34;2025-04-22T06:19:46.179Z&#34;,
   &#34;status&#34;: &#34;resolved&#34;
  }
 ],
 &#34;allVariables&#34;: {},
 &#34;commonAnnotations&#34;: {},
 &#34;commonLabels&#34;: {
  &#34;grafana_folder&#34;: &#34;Test Folder&#34;,
  &#34;instance&#34;: &#34;instance1&#34;
 },
 &#34;externalURL&#34;: &#34;http://localhost:3000/&#34;,
 &#34;groupKey&#34;: &#34;&#34;,
 &#34;groupLabels&#34;: {
  &#34;group_label&#34;: &#34;group_label_value&#34;
 },
 &#34;message&#34;: &#34;**Firing**\n\nValue: B=22, C=1\nLabels:\n - alertname = InstanceDown\n - grafana_folder = Test Folder\n - instance = instance1\nAnnotations:\n - summary = Instance instance1 has been down for more than 5 minutes\nSource: http://grafana.com/alerting/grafana/cdeqmlhvflz40f/view?orgId=1\nSilence: http://localhost:3000/alerting/silence/new?alertmanager=grafana\u0026matcher=alertname%3DInstanceDown\u0026matcher=grafana_folder%3DTest+Folder\u0026matcher=instance%3Dinstance1\u0026orgId=1\nDashboard: http://localhost:3000/d/dashboard_uid?from=1745227186179\u0026orgId=1\u0026to=1745317189058\nPanel: http://localhost:3000/d/dashboard_uid?from=1745227186179\u0026orgId=1\u0026to=1745317189058\u0026viewPanel=1\n\n\n**Resolved**\n\nValue: B=22, C=1\nLabels:\n - alertname = CpuUsage\n - grafana_folder = Test Folder\n - instance = instance1\nAnnotations:\n - summary = CPU usage above 90%\nSource: http://grafana.com/alerting/grafana/oZSMdGj7z/view?orgId=1\nSilence: http://localhost:3000/alerting/silence/new?alertmanager=grafana\u0026matcher=alertname%3DCpuUsage\u0026matcher=grafana_folder%3DTest+Folder\u0026matcher=instance%3Dinstance1\u0026orgId=1\nDashboard: http://localhost:3000/d/dashboard_uid?from=1745299186179\u0026orgId=1\u0026to=1745317186179\nPanel: http://localhost:3000/d/dashboard_uid?from=1745299186179\u0026orgId=1\u0026to=1745317186179\u0026viewPanel=1\n&#34;,
 &#34;orgId&#34;: 1,
 &#34;receiver&#34;: &#34;TestReceiver&#34;,
 &#34;state&#34;: &#34;alerting&#34;,
 &#34;status&#34;: &#34;firing&#34;,
 &#34;title&#34;: &#34;[FIRING:1, RESOLVED:1] group_label_value (Test Folder instance1)&#34;,
 &#34;truncatedAlerts&#34;: null,
 &#34;version&#34;: &#34;1&#34;
}</pre>
