<!DOCTYPE html>
<h1 id="group-alert-notifications">Group alert notifications</h1>
<p>Grouping in Grafana Alerting allows you to batch relevant alerts together into a smaller number of notifications. This is particularly important if notifications are delivered to first-responders, such as engineers on-call, where receiving lots of notifications in a short period of time can be overwhelming. In some cases, it can negatively impact a first-responders ability to respond to an incident. For example, consider a large outage where many of your systems are down. In this case, grouping can be the difference between receiving 1 phone call and 100 phone calls.</p>


<div class="admonition admonition-tip"><blockquote><p class="title text-uppercase">Tip</p><p>For a practical example of grouping, refer to our <a href="/tutorials/alerting-get-started-pt3/">Getting Started with Grouping tutorial</a>.</p></blockquote></div>

<h2 id="group-notifications">Group notifications</h2>
<p>Grouping combines similar alert instances within a specific period into a single notification, reducing alert noise.</p>
<p>In the 
    <a href="/docs/grafana/latest/alerting/fundamentals/notifications/notification-policies/">notification policy</a>, you can configure how to group multiple alerts into a single notification:</p>
<ul>
<li>The <code>Group by</code> option specifies the criteria for grouping incoming alerts within the policy. The default is by alert rule.</li>
<li><a href="#timing-options">Timing options</a> determine when and how often to send the notification.</li>
</ul>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 750px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link"
        href="/media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload "
          data-src="/media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png"data-srcset="/media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=320 320w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=550 550w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=750 750w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=900 900w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=1040 1040w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=1240 1240w, /media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png?w=1920 1920w"
          data-sizes="auto"alt="A diagram about the components of a notification policy, including labels and groups"width="1620"height="422"/>
        <noscript>
          <img
            src="/media/docs/alerting/alerting-notification-policy-diagram-with-labels-v3.png"
            alt="A diagram about the components of a notification policy, including labels and groups"width="1620"height="422"/>
        </noscript></div></a></figure>
<p>Alert instances are grouped together if they have the same exact label values for the labels configured in the <code>Group by</code> option.</p>
<p>For example, given the <code>Group by</code> option set to the <code>team</code> label:</p>
<ul>
<li><code>alertname:foo, team=frontend</code>, and <code>alertname:bar, team=frontend</code> are in one group.</li>
<li><code>alertname:foo, team=frontend</code>, and <code>alertname:qux, team=backend</code> are in another group.</li>
</ul>
<h3 id="group-by-alert-rule-or-labels">Group by alert rule or labels</h3>
<p>By default, notification policies in Grafana group alerts by the alert rule. Specifically, they are grouped using the <code>alertname</code> and <code>grafana_folder</code> labels, as alert rule names are not unique across folders.</p>
<p>If you want to group alerts by other labels, something other than the alert rule, change the <code>Group by</code> option to any other combination of labels.</p>
<h3 id="a-single-group-for-all-alerts">A single group for all alerts</h3>
<p>If you want to group all alerts handled by the notification policy in a single group (without grouping notifications by alert rule or other labels), leave <code>Group by</code> empty in the Default policy.</p>
<h3 id="disable-grouping">Disable grouping</h3>
<p>If you want to receive every alert as a separate notification, you can do so by grouping by a special label called <code>...</code>, ensuring that other labels are not present.</p>
<h2 id="timing-options">Timing options</h2>
<p>In the notification policy, you can also configure how often notifications are sent for each <a href="#group-notifications">group of alerts</a>. There are three distinct timers applied to groups within the notification policy:</p>
<ul>
<li><strong><a href="#group-wait">Group wait</a></strong>: the time to wait before sending the first notification for a new group of alerts.</li>
<li><strong><a href="#group-interval">Group interval</a></strong>: the time to wait before sending a notification about changes in the alert group.</li>
<li><strong><a href="#repeat-interval">Repeat interval</a></strong>: the time to wait before sending a notification if the group has not changed since the last notification.</li>
</ul>
<p>These timers reduce the number of notifications sent. By delaying the delivery of notifications, incoming alerts can be grouped into just one notification instead of many.</p>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 750px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/media/docs/alerting/alerting-timing-options-flowchart-v2.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/media/docs/alerting/alerting-timing-options-flowchart-v2.png"data-srcset="/media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=320 320w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=550 550w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=750 750w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=900 900w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=1040 1040w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=1240 1240w, /media/docs/alerting/alerting-timing-options-flowchart-v2.png?w=1920 1920w"
          data-sizes="auto"alt="A basic sequence diagram of the the notification policy timers"width="3840"height="955"title="A basic sequence diagram of the notification policy timers"/>
        <noscript>
          <img
            src="/media/docs/alerting/alerting-timing-options-flowchart-v2.png"
            alt="A basic sequence diagram of the the notification policy timers"width="3840"height="955"title="A basic sequence diagram of the notification policy timers"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">A basic sequence diagram of the notification policy timers</figcaption></a></figure>
<!--
flowchart LR
    A((First alert)) -///-> B
    B[Group wait <br/>  notification] -///-> C
    B -- no changes -///-> D
    C[Group interval <br/>  notification] -- no changes -///-> D
    C -- group changes -///-> C
    D[Repeat interval <br/>  notification]
-->
<h3 id="group-wait">Group wait</h3>
<p><strong>Default</strong>: 30 seconds</p>
<p>Group wait is the duration Grafana waits before sending the first notification for a new group of alerts.</p>
<p>This option helps reduce the number of notifications sent for related alerts occurring within a short time frame. The longer the group wait, the more time other alerts have to be included in the initial notification of the new group. The shorter the group wait, the earlier the first notification is sent, but at the risk of not including some alerts.</p>
<p>If an alert is resolved before the duration elapses, no notification is sent for that alert. This reduces noise from flapping alerts.</p>
<p><strong>Example</strong></p>
<p>Consider a notification policy that:</p>
<ul>
<li>Matches all alert instances with the <code>team</code> label—matching labels equals to <code>team=~.+</code>.</li>
<li>Groups notifications by the <code>team</code> label—one group for each distinct <code>team</code>.</li>
<li>Sets the Group wait timer to <code>30s</code>.</li>
</ul>
<table>
  <thead>
      <tr>
          <th>Time</th>
          <th>Incoming alert instance</th>
          <th>Notification policy group</th>
          <th>Number of instances</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>00:00</td>
          <td><code>alertname=f1</code> <code>team=frontend</code></td>
          <td><code>frontend</code></td>
          <td>1</td>
          <td>Starts the group wait timer of the <code>frontend</code> group.</td>
      </tr>
      <tr>
          <td>00:10</td>
          <td><code>alertname=f2</code> <code>team=frontend</code></td>
          <td><code>frontend</code></td>
          <td>2</td>
          <td></td>
      </tr>
      <tr>
          <td>00:20</td>
          <td><code>alertname=b1</code> <code>team=backend</code></td>
          <td><code>backend</code></td>
          <td>1</td>
          <td>Starts the group wait timer of the <code>backend</code> group.</td>
      </tr>
      <tr>
          <td>00:30<sup>*</sup></td>
          <td></td>
          <td><code>frontend</code></td>
          <td>2</td>
          <td>Group wait elapsed. <br/> Send initial notification reporting 2 alerts.</td>
      </tr>
      <tr>
          <td>00:35</td>
          <td><code>alertname=b2</code> <code>team=backend</code></td>
          <td><code>backend</code></td>
          <td>2</td>
          <td></td>
      </tr>
      <tr>
          <td>00:40</td>
          <td><code>alertname=b3</code> <code>team=backend</code></td>
          <td><code>backend</code></td>
          <td>3</td>
          <td></td>
      </tr>
      <tr>
          <td>00:50<sup>*</sup></td>
          <td></td>
          <td><code>backend</code></td>
          <td>3</td>
          <td>Group wait elapsed. <br/> Send initial notification reporting 3 alerts.</td>
      </tr>
  </tbody>
</table>
<h3 id="group-interval">Group interval</h3>
<p><strong>Default</strong>: 5 minutes</p>
<p>If an alert was too late to be included in the first notification due to group wait, it is included in subsequent notifications after group interval.</p>
<p>Group interval is the duration to wait before sending notifications about group changes. A group change occurs when:</p>
<ul>
<li>A new firing alert is added to the group.</li>
<li>An existing alert is resolved.</li>
</ul>
<p><strong>Example</strong></p>
<p>Here are the related excerpts from the previous example:</p>
<table>
  <thead>
      <tr>
          <th>Time</th>
          <th>Incoming alert instance</th>
          <th>Notification policy group</th>
          <th>Number of instances</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>00:30<sup>*</sup></td>
          <td></td>
          <td><code>frontend</code></td>
          <td>2</td>
          <td>Group wait elapsed and starts Group interval timer. <br/> Send initial notification reporting 2 alerts.</td>
      </tr>
      <tr>
          <td>00:50<sup>*</sup></td>
          <td></td>
          <td><code>backend</code></td>
          <td>3</td>
          <td>Group wait elapsed and starts Group interval timer. <br/> Send initial notification reporting 3 alerts.</td>
      </tr>
  </tbody>
</table>
<p>And below is the continuation of the example setting the Group interval timer to 5 minutes:</p>
<table>
  <thead>
      <tr>
          <th>Time</th>
          <th>Incoming alert instance</th>
          <th>Notification policy group</th>
          <th>Number of instances</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>01:30</td>
          <td><code>alertname=f3</code> <code>team=frontend</code></td>
          <td><code>frontend</code></td>
          <td>3</td>
          <td></td>
      </tr>
      <tr>
          <td>02:30</td>
          <td><code>alertname=f4</code> <code>team=frontend</code></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td></td>
      </tr>
      <tr>
          <td>05:30<sup>*</sup></td>
          <td></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td>Group interval elapsed and resets timer. <br/> Send one notification reporting 4 alerts.</td>
      </tr>
      <tr>
          <td>05:50<sup>*</sup></td>
          <td></td>
          <td><code>backend</code></td>
          <td>3</td>
          <td>Group interval elapsed and resets timer. <br/> No group changes, and do not send notification.</td>
      </tr>
      <tr>
          <td>08:00</td>
          <td><code>alertname=f4</code> <code>team=backend</code></td>
          <td><code>backend</code></td>
          <td>4</td>
          <td></td>
      </tr>
      <tr>
          <td>10:30<sup>*</sup></td>
          <td></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td>Group interval elapsed and resets timer. <br/> No group changes, and do not send notification.</td>
      </tr>
      <tr>
          <td>10:50<sup>*</sup></td>
          <td></td>
          <td><code>backend</code></td>
          <td>4</td>
          <td>Group interval elapsed and resets timer. <br/> Send one notification reporting 4 alerts.</td>
      </tr>
  </tbody>
</table>
<p><strong>How it works</strong></p>
<p>Once the first notification has been sent for a new group of alerts, the group interval timer starts.</p>
<p>When the group interval timer elapses, the system resets the group interval timer and sends a notification only if there were group changes. This process repeats until there are no more alerts.</p>
<p>It&rsquo;s important to note that an alert instance exits the group after being resolved and notified of its state change. When no alerts remain, the group is deleted, and then the group wait timer handles the first notification for the next incoming alert once again.</p>
<h3 id="repeat-interval">Repeat interval</h3>
<p><strong>Default</strong>: 4 hours</p>
<p>Repeat interval acts as a reminder that alerts in the group are still firing.</p>
<p>The repeat interval timer decides how often notifications are sent (or repeated) if the group has not changed since the last notification.</p>
<p><strong>How it works</strong></p>
<p>Repeat interval is evaluated every time the group interval resets. If the alert group has not changed and the time since the last notification was longer than the repeat interval, then a notification is sent as a reminder that the alerts are still firing.</p>
<p>Repeat interval must not only be greater than or equal to group interval, but also must be a multiple of Group interval. If Repeat interval is not a multiple of group interval it is coerced into one. For example, if your Group interval is 5 minutes, and your Repeat interval is 9 minutes, the Repeat interval is rounded up to the nearest multiple of 5 which is 10 minutes.</p>
<p>The maximum duration of the repeat interval is 5 days, constrained by the default value of the <code>notification_log_retention</code> setting in Grafana.</p>
<p><strong>Example</strong></p>
<p>Here are the related excerpts from the previous example:</p>
<table>
  <thead>
      <tr>
          <th>Time</th>
          <th>Incoming alert instance</th>
          <th>Notification policy group</th>
          <th>Number of instances</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>05:30<sup>*</sup></td>
          <td></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td>Group interval resets. <br/> Send the last notification.</td>
      </tr>
      <tr>
          <td>10:50<sup>*</sup></td>
          <td></td>
          <td><code>backend</code></td>
          <td>4</td>
          <td>Group interval resets. <br/> Send the last notification.</td>
      </tr>
  </tbody>
</table>
<p>And below is the continuation of the example setting the Repeat interval timer to 4 hours:</p>
<table>
  <thead>
      <tr>
          <th>Time</th>
          <th>Incoming alert instance</th>
          <th>Notification policy group</th>
          <th>Number of instances</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>04:05:30</td>
          <td></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td>Group interval resets. The time since the last notification was no longer than the repeat interval.</td>
      </tr>
      <tr>
          <td>04:10:30</td>
          <td></td>
          <td><code>frontend</code></td>
          <td>4</td>
          <td>Group interval resets. The time since the last notification was longer than the repeat interval. <br/> Send one notification reminding the 4 firing alerts.</td>
      </tr>
      <tr>
          <td>04:10:50</td>
          <td></td>
          <td><code>backend</code></td>
          <td>4</td>
          <td>Group interval resets. The time since the last notification was no longer than the repeat interval.</td>
      </tr>
      <tr>
          <td>04:15:50</td>
          <td></td>
          <td><code>backend</code></td>
          <td>4</td>
          <td>Group interval resets. The time since the last notification was longer than the repeat interval. <br/> Send one notification reminding the 4 firing alerts.</td>
      </tr>
  </tbody>
</table>
