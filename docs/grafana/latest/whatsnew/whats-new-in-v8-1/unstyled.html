<!DOCTYPE html>
<h1 id="whats-new-in-grafana-v81">What&rsquo;s new in Grafana v8.1</h1>
<blockquote>
<p><strong>Note:</strong> This topic will be updated frequently between now and the final release.</p></blockquote>
<p>Grafana 8.1 builds upon our promise of a composable, open observability platform with new panels and extends functionality launched in Grafana 8.0. We’ve got new Geomap and Annotations panels, and some great updates to the Time Series panel. We’ve also got new transformations and updates to data sources. For our enterprise customers, there are additions to fine grained access control, updates to the reporting schedule and query caching, and more. Read on to learn more.</p>
<p>In addition to what is summarized here, you might also be interested in our announcement blog post. For all the technical details, check out the complete <a href="https://github.com/grafana/grafana/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG.md</a>.</p>
<h2 id="grafana-oss-features">Grafana OSS features</h2>
<p>These features are included in the Grafana open source edition.</p>
<h2 id="geomap-panel">Geomap panel</h2>
<p>Grafana 8.1 introduces the foundation for our new map panel. This new panel leverages <a href="https://openlayers.org/" target="_blank" rel="noopener noreferrer">OpenLayers</a> and gives us a flexible solution for extending the way we use the new Geomap panel moving forward. The new Geomap panel includes multiple base layer styles (map layer options), as well as a more open data layer. The data layer can use coordinates and geo-hashed data in addition to a lookup table.</p>
<p>The Geomap panel is also able to share views across multiple Geomap panels on the same dashboard, making it straightforward to visualize and explore multiple types of geospatial data using the same map zoom and focus settings. For more information, refer to <a href="../../panels-visualizations/visualizations/geomap/">Geomap panel</a>.
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 850px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/geomap-panel/geomap_with_heatmap.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/geomap-panel/geomap_with_heatmap.png"data-srcset="/static/img/docs/geomap-panel/geomap_with_heatmap.png?w=320 320w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=550 550w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=750 750w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=900 900w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=1040 1040w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=1240 1240w, /static/img/docs/geomap-panel/geomap_with_heatmap.png?w=1920 1920w"
          data-sizes="auto"alt="Geomap panel: Heatmap"width="1020"height="614"title="Geomap panel: Heatmap"/>
        <noscript>
          <img
            src="/static/img/docs/geomap-panel/geomap_with_heatmap.png"
            alt="Geomap panel: Heatmap"width="1020"height="614"title="Geomap panel: Heatmap"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Geomap panel: Heatmap</figcaption></a></figure></p>
<h2 id="annotation-panel">Annotation panel</h2>
<p>The new Annotations panel shows a list of available annotations you can use to create lists of annotated data available within your organization. Various options are available to filter the list based on the tags and on the current dashboard. This panel makes it easy to find and filter annotated data within and across multiple dashboards.</p>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 900px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/annotations-panel/annolist.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/annotations-panel/annolist.png"data-srcset="/static/img/docs/annotations-panel/annolist.png?w=320 320w, /static/img/docs/annotations-panel/annolist.png?w=550 550w, /static/img/docs/annotations-panel/annolist.png?w=750 750w, /static/img/docs/annotations-panel/annolist.png?w=900 900w, /static/img/docs/annotations-panel/annolist.png?w=1040 1040w, /static/img/docs/annotations-panel/annolist.png?w=1240 1240w, /static/img/docs/annotations-panel/annolist.png?w=1920 1920w"
          data-sizes="auto"alt="Annotations panel"width="485"height="613"title="Annotations panel"/>
        <noscript>
          <img
            src="/static/img/docs/annotations-panel/annolist.png"
            alt="Annotations panel"width="485"height="613"title="Annotations panel"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Annotations panel</figcaption></a></figure>
<h3 id="time-series-panel-updates">Time series panel updates</h3>
<p>The time series panel has been updated with the ability to color series and line by thresholds or gradient color scales. This allows users to create panels where the line color can change dynamically based on thresholds or using gradient color scales. It adds a layer of visibility to your data, making it easier to view the changes across thresholds at a glance quickly.</p>
<p>Color scheme <strong>From thresholds</strong>:
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 1200px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png"data-srcset="/static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=320 320w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=550 550w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=750 750w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=900 900w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=1040 1040w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=1240 1240w, /static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png?w=1920 1920w"
          data-sizes="auto"alt="Colors scheme: From thresholds"width="813"height="343"title="Colors scheme: From thresholds"/>
        <noscript>
          <img
            src="/static/img/docs/time-series-panel/gradient_mode_scheme_thresholds_line.png"
            alt="Colors scheme: From thresholds"width="813"height="343"title="Colors scheme: From thresholds"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Colors scheme: From thresholds</figcaption></a></figure></p>
<p>Color scheme: <strong>Green-Yellow-Red (by value)</strong>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 1200px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/time-series-panel/gradient_mode_scheme_line.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/time-series-panel/gradient_mode_scheme_line.png"data-srcset="/static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=320 320w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=550 550w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=750 750w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=900 900w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=1040 1040w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=1240 1240w, /static/img/docs/time-series-panel/gradient_mode_scheme_line.png?w=1920 1920w"
          data-sizes="auto"alt="Color scheme: Green-Yellow-Red"width="819"height="339"title="Color scheme: Green-Yellow-Red"/>
        <noscript>
          <img
            src="/static/img/docs/time-series-panel/gradient_mode_scheme_line.png"
            alt="Color scheme: Green-Yellow-Red"width="819"height="339"title="Color scheme: Green-Yellow-Red"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Color scheme: Green-Yellow-Red</figcaption></a></figure></p>
<p>For more on how to configure Graphs with by value color schemes read <a href="../../panels-visualizations/visualizations/time-series/">Graph and color schemes</a>.</p>
<p>You can also create annotations in the new Time series panel bringing it closer to parity with the legacy Graph panel. To learn more, refer to the <a href="../../panels-visualizations/visualizations/time-series/">time series panel</a>.</p>
<h3 id="transformations-improvements">Transformations improvements</h3>
<p>Grafana 8.1 includes some significant enhancements to transformations, including two new transformations designed around providing dynamic configuration to your panels and visualizations.</p>
<h4 id="config-from-query-beta">Config from query (Beta)</h4>
<p>This transformation enables panel config (Threshold, Min, Max, etc.) to be derived from query results. For more information, refer to <a href="../../panels-visualizations/query-transform-data/transform-data/#config-from-query-results">Config from query results</a>.</p>
<h4 id="rows-to-fields-beta">Rows to fields (Beta)</h4>
<p>This transformation enables rows in returned data to be converted into separate fields. Prior to this enhancement, you could style and configure fields individually, but not rows. For more information, refer to [Rows to fields transform].</p>
<p>Example, Input:</p>
<table>
  <thead>
      <tr>
          <th>Name</th>
          <th>Value</th>
          <th>Max</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ServerA</td>
          <td>10</td>
          <td>100</td>
      </tr>
      <tr>
          <td>ServerB</td>
          <td>20</td>
          <td>200</td>
      </tr>
      <tr>
          <td>ServerC</td>
          <td>30</td>
          <td>300</td>
      </tr>
  </tbody>
</table>
<p>Output:</p>
<table>
  <thead>
      <tr>
          <th>ServerA (config: max=100)</th>
          <th>ServerB (config: max=200)</th>
          <th>ServerC (config: max=300)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>10</td>
          <td>20</td>
          <td>30</td>
      </tr>
  </tbody>
</table>
<p>As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like <strong>Min</strong>, <strong>Max</strong>, <strong>Unit</strong> and <strong>Thresholds</strong> are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.</p>
<p>For more on how to use this transformation, refer to <a href="../../panels-visualizations/query-transform-data/transform-data/#rows-to-fields">Rows to fields transform</a>.</p>
<h4 id="contextual--inline-help">Contextual &amp; Inline Help</h4>
<p>Additional inline help will be available for Transformations. We can now share examples of how to use specific transformations and point users directly to the appropriate place in the docs for more information.</p>
<h3 id="data-source-updates">Data source updates</h3>
<p>The following data source updates are included with this Grafana release.</p>
<h4 id="mysql-data-source">MySQL Data Source</h4>
<p>We have added timezone support. As a result, you can now specify the time zone used in the database session, such as <code>Europe/Berlin</code> or <code>+02:00</code>.</p>
<h3 id="trace-to-logs-improvements">Trace to logs improvements</h3>
<p>We changed the default behavior from creating a 1-hour span Loki query to the only query at the exact time the trace span started for the duration of it. For more fine grained control over this, you can shift this time in the tracing data source settings. Also, it is now possible to shift the start time and end time of the Loki query by the set amount. For more information, refer to <a href="../../datasources/tempo/#trace-to-logs">Trace to logs</a>.</p>
<h3 id="prettify-json-for-logs-in-explore">Prettify JSON for Logs in Explore</h3>
<p>Added the ability to format JSON to make it easier to view, review and find relevant data in JSON format logs. This is a regular JSON log.</p>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 1200px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/panels/pretty-json/regular-log-line.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/panels/pretty-json/regular-log-line.png"data-srcset="/static/img/docs/panels/pretty-json/regular-log-line.png?w=320 320w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=550 550w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=750 750w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=900 900w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=1040 1040w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=1240 1240w, /static/img/docs/panels/pretty-json/regular-log-line.png?w=1920 1920w"
          data-sizes="auto"alt="Regular log line"width="1556"height="108"title="Regular log line"/>
        <noscript>
          <img
            src="/static/img/docs/panels/pretty-json/regular-log-line.png"
            alt="Regular log line"width="1556"height="108"title="Regular log line"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Regular log line</figcaption></a></figure>
<p>And here is the prettified JSON log.</p>
<figure
    class="figure-wrapper figure-wrapper__lightbox w-100p "
    style="max-width: 1200px;"
    itemprop="associatedMedia"
    itemscope=""
    itemtype="http://schema.org/ImageObject"
  ><a
        class="lightbox-link captioned"
        href="/static/img/docs/panels/pretty-json/prettified-json.png"
        itemprop="contentUrl"
      ><div class="img-wrapper w-100p h-auto"><img
          class="lazyload mb-0"
          data-src="/static/img/docs/panels/pretty-json/prettified-json.png"data-srcset="/static/img/docs/panels/pretty-json/prettified-json.png?w=320 320w, /static/img/docs/panels/pretty-json/prettified-json.png?w=550 550w, /static/img/docs/panels/pretty-json/prettified-json.png?w=750 750w, /static/img/docs/panels/pretty-json/prettified-json.png?w=900 900w, /static/img/docs/panels/pretty-json/prettified-json.png?w=1040 1040w, /static/img/docs/panels/pretty-json/prettified-json.png?w=1240 1240w, /static/img/docs/panels/pretty-json/prettified-json.png?w=1920 1920w"
          data-sizes="auto"alt="Prettified JSON"width="1376"height="374"title="Prettified JSON"/>
        <noscript>
          <img
            src="/static/img/docs/panels/pretty-json/prettified-json.png"
            alt="Prettified JSON"width="1376"height="374"title="Prettified JSON"/>
        </noscript></div><figcaption class="w-100p caption text-gray-13  ">Prettified JSON</figcaption></a></figure>
<p>For more on how to prettify JSON logs, refer to <a href="../../panels-visualizations/visualizations/">Visualization</a> and <a href="../../panels-visualizations/visualizations/logs/">Display</a> options.</p>
<h3 id="plugin-catalog---updated-ux-and-extended-features">Plugin catalog - Updated UX and extended features</h3>
<p>We’ve made some changes to the plugins UI to help make it easier to discover and manage your plugins. Enterprise users can now also manage enterprise plugins from within the catalog.</p>
<h4 id="documentation-updates">Documentation updates</h4>
<p>New panel summaries and preview on the top level <a href="../../panels-visualizations/visualizations/">Visualizations</a> page to help users pick or learn about specific visualizations more easily.</p>
<h3 id="upcoming-changes-to-the-select-component">Upcoming changes to the Select component</h3>
<p>The <code>@grafana/ui</code> exposes a <code>Select</code> component, and its variants <code>MultiSelect</code>, <code>AsyncSelect</code>, and <code>AsyncMultiSelect</code>. We have made some internal changes to these components to make the behavior and positioning more consistent in all scenarios.</p>
<p>To test the changes, you can use the <code>menuShouldPortal</code> property:</p>
<pre>&lt;Select menuShouldPortal {...otherProps} /&gt;</pre>
<p>Tests are most likely to be affected. There are some tips for fixing these in the original pull request at <a href="https://github.com/grafana/grafana/pull/36398" target="_blank" rel="noopener noreferrer">https://github.com/grafana/grafana/pull/36398</a>.</p>
<p>We’d love as much feedback as possible about this change, because we are considering making this the default behavior in a future release of Grafana.</p>
<h3 id="high-availability-setup-support-for-grafana-live">High availability setup support for Grafana Live</h3>
<p>We have added an experimental HA setup support for Grafana Live with Redis. This resolves the limitation when clients were connected to different Grafana instances and those instances had no shared state. For additional information, refer to <a href="../../setup-grafana/set-up-grafana-live/#configure-grafana-live-ha-setup">Configure Grafana Live HA setup</a>.</p>
<h2 id="enterprise-features">Enterprise features</h2>
<p>These features are included in the Grafana Enterprise edition.</p>
<h3 id="new-permissions-for-role-based-access-control">New permissions for role-based access control</h3>
<p>Role-based access control remains in beta. You can now grant or revoke permissions for Viewers, Editors, or Admins to use Explore mode, configure LDAP or SAML settings, or view the admin/stats page. These new permissions enhance the existing permissions that can be customized, namely permissions to access Users, Orgs, LDAP settings, and Reports in Grafana.</p>
<p>Fine grained access control allows you to customize roles and permissions in Grafana beyond the built-in Viewer, Editor, and Admin roles. As of 8.1, you can modify some of the permissions for any of these built-in roles. This is helpful if you’d like users to have more or fewer access permissions than a given role allows for by default. For an overview of role-based access control and a complete list of available permissions, refer to the <a href="../../administration/roles-and-permissions/access-control/">Fine grained access control</a> documentation.</p>
<h3 id="new-and-improved-reporting-scheduler">New and improved reporting scheduler</h3>
<p>We’ve enhanced the scheduler for Reports to be more flexible, so you can send reports at just the right time. When scheduling a report, you can now choose to send a report at custom intervals such as every 4 hours or every 2 weeks. You can also send a report for a limited time period by providing a start and end date, or send a report only on weekdays or on the last day of each month. This change accompanies some other recent improvements to Reporting, like the ability to choose template variables for reports and an improved UX for authoring reports. To learn more, refer to the <a href="../../dashboards/share-dashboards-panels/#reporting">reporting</a> documentation.</p>
<h3 id="encrypt-data-in-the-query-cache">Encrypt data in the query cache</h3>
<p>Query caching was released in Grafana 8.0 and allows you to temporarily store the results of data source queries in a cache, so that Grafana reads repeated queries from there instead of from the data source itself. This reduces load on data sources, improves dashboard load times, and can save money for data sources that charge per query. To learn more about query caching see its <a href="../../administration/data-source-management/#query-and-resource-caching">overview</a> page. To find out how to turn on encryption, refer to the <a href="../../setup-grafana/configure-grafana/enterprise-configuration/#caching">caching configuration</a> documentation.</p>
<p>You can now encrypt the query data cached by Grafana. This improves the security of query data, especially when your cache (like Redis) is shared with other services.</p>
<h3 id="white-labeling-for-the-grafana-loading-logo">White labeling for the Grafana loading logo</h3>
<p>You can now customize Grafana’s loading logo, which displays while Grafana is loading in a user’s browser. White labeling in Grafana Enterprise allows you to customize the look and feel of Grafana to match your product’s or company’s brand. This makes Grafana a more integrated part of your observability stack and keep Grafana consistent with other visualizations displayed in public.</p>
<p>To find out how you can configure it along with other Grafana UI elements, like the corner logo and application footer, refer to the <a href="../../setup-grafana/configure-grafana/configure-custom-branding/">White labeling</a> topic of the Grafana Enterprise docs.</p>
<h3 id="oauth2---team-sync-to-group-mapping">Oauth2 - Team Sync to Group Mapping</h3>
<p>With Team Sync you can map your Generic OAuth groups to teams in Grafana so that the users are automatically added to the correct teams.</p>
